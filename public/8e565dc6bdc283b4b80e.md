---
title: Pythonista3 ã®ui ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦çµµã‚’æã ã€œ ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã™ã‚‹ ã€œ
tags:
  - Python
  - Mobile
  - MobileApp
  - CreativeCoding
  - Pythonista3
private: false
updated_at: '2022-12-06T07:01:08+09:00'
id: 8e565dc6bdc283b4b80e
organization_url_name: null
slide: false
ignorePublish: false
---

ã“ã®è¨˜äº‹ã¯ã€[Pythonista3 Advent Calendar 2022](https://qiita.com/advent-calendar/2022/pythonista3) ã®06æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚

https://qiita.com/advent-calendar/2022/pythonista3

ä¸€æ–¹çš„ãªåã£ãŸç›®ç·šã§ã€Pythonista3 ã‚’ç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚

ã»ã¼æ¯æ—¥iPhoneï¼ˆPythonista3ï¼‰ã§ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ã—ã¦ã„ã‚‹è€…ã§ã™ã€‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚

ä»¥ä¸‹ã€ç§ã®2022å¹´12æœˆæ™‚ç‚¹ã®ç’°å¢ƒã§ã™ã€‚

```sysInfo.log
--- SYSTEM INFORMATION ---

* Pythonista 3.3 (330025), Default interpreter 3.6.1
* iOS 16.0.2, model iPhone12,1, resolution (portrait) 828.0 x 1792.0 @ 2.0
```

ä»–ã®ç’°å¢ƒ(iPad ã‚„ç«¯æœ«ã®ç¨®é¡ã€iOS ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³é•ã„)ã§ã¯ã€æ„å›³ã¨ã—ãªã„æŒ™å‹•(ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹)ãªã‚‹å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚ã”äº†æ‰¿ãã ã•ã„ã€‚

ã¡ãªã¿ã«ã€`model iPhone12,1` ã¯ã€iPhone11 ã§ã™ã€‚

## `ui` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§çµµã‚’æã“ã†ãœ

å‰å›ï¼ˆæ€¥è¶³ã§ï¼‰ç´¹ä»‹ãŒã§ãã¦ã„ãªã‹ã£ãŸæ©Ÿèƒ½ãŸã¡ãŒã‚ã‚Šã¾ã™ã€‚

- `draw` ãƒ¡ã‚½ãƒƒãƒ‰
- `ui.Path`

ä»–ã®`ui` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã¯ä½¿ã‚ã‚Œæ–¹ã‚„è€ƒãˆæ–¹ãŒé•ã£ã¦ãŠã‚Šã€iOS API ã§ã„ã†ã¨ã“ã‚ã®

- `CAShapeLayer`
- `UIBezierPath`

ã®ã‚ˆã†ã«ã€View ã§ã¯ãªãLayer ã‚’ç”¨ã„ãŸå®Ÿè£…ã¨ãªã‚Šã¾ã™ã€‚

Pythonista3 ã«ã¯ã€`canvas` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚‚ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ãŒã€`ui` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã‚¢ãƒ—ãƒªä¸Šã«ä¹—ã›ã‚‹ã¨è€ƒãˆã‚‹ã¨ãªã‹ãªã‹`canvas` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å‡ºç•ªã¯å°‘ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

[canvas â€” Vector Graphics â€” Python 3.6.1 documentation](https://omz-software.com/pythonista/docs/ios/canvas.html)

https://omz-software.com/pythonista/docs/ios/canvas.html


### åŸºç¤çš„ãªå‘¼ã³å‡ºã—

ã¨ã«ã‹ãã€`draw` ãƒ¡ã‚½ãƒƒãƒ‰ã‚„`ui.Path` ã‚’ä½¿ã£ãŸã‚³ãƒ¼ãƒ‰æ›¸ã„ã¦å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```py
import ui


class MainView(ui.View):
  def __init__(self):
    self.name = 'draw'
    self.bg_color = 0.5  # todo: ç°è‰²

  def draw(self):
    _, _, w, h = self.frame
    rect_width = 100
    rect_height = 100
    x = w / 2 - rect_width / 2
    y = h / 2 - rect_height / 2

    rect = ui.Path.rect(x, y, rect_width, rect_height)
    ui.set_color('red')
    rect.fill()


if __name__ == '__main__':
  main_view = MainView()
  main_view.present(style='fullscreen', orientations=['portrait'])

```


![img221122_084419.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/0184489d-aa8b-34b7-7612-5f9065728d8f.png)



å‰å›ã¨è¦‹ãŸç›®ãŒåŒã˜ã§ã™ã‹ï¼Ÿãã†è¦‹ãˆã¾ã™ã‹ï¼Ÿ

æ•¢ãˆã¦ã§ã™ã€‚ã‚ã–ã‚ã–åŒã˜è¦‹ãŸç›®ã«ãªã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸï¼ˆè©æ¬ºå¸«ã®æ‰‹æ³•ã¿ãŸã„ï¼‰ã€‚

å‰å›ã¯main ã®View ãŒ`add_subview` ã§ã€sub ã®View ã‚’å–ã‚Šè¾¼ã‚“ã§ã„ã¾ã—ãŸã€‚View ã®ä¸­ã«View ã‚’å…¥ã‚Œã¦è¡¨ç¤ºã•ã‚Œã¦ã„ãŸã®ã§ã™ã€‚

ä»Šå›ã¯ã€`add_subview` ãŒå‘¼ã°ã‚Œã¦ã¾ã›ã‚“ã€‚main ã®View ã®æç”»é ˜åŸŸã«èµ¤è‰²ã®çŸ©å½¢ã‚’æã„ã¦ã„ã¾ã™ã€‚


![img221122_091910.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/fd840b8c-6f13-d56a-cf9d-e9cf3ddc583e.png)



inspector ã‚’è¦‹ã‚‹ã¨`subviews` ãŒç©ºãªã®ãŒç¢ºèªã§ãã¾ã™ã€‚



![img221122_090034.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/98e88e11-2c8d-ab0d-a869-426330d4a37a.png)



#### è‰²ã€…æã„ã¦ã¿ã‚‹

ï¼ˆä»–ã«ã‚¹ãƒãƒ¼ãƒˆãªæ–¹æ³•ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒï¼‰ç·šã‚„å††ã‚’æç”»ã—ã¦ã¿ã¾ã—ãŸã€‚


![img221122_122135.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/b49a45ea-cdc0-eb32-0bd5-42a6f9a310ae.png)



```py
import ui


class MainView(ui.View):
  def __init__(self):
    self.name = 'è‰²ã€…æã„ã¦ã¿ã‚‹'
    self.bg_color = 0.9  # todo: ã»ã¼ç™½

  def draw(self):
    _, _, w, h = self.frame
    xy_path = ui.Path()  # ç¸¦æ¨ªã®ç·šã‚’å¼•ããŸã‚ã®ãƒ‘ã‚¹ã‚’æº–å‚™

    # todo: x line ï¼ˆæ¨ªç·šã‚’å¼•ãï¼‰
    xy_path.line_width = 4  # ç·šã®å¤ªã•
    xy_path.move_to(0.0, h / 2)  # ç·šã®å¼•ãå§‹ã‚ã®ä½ç½®è¨­å®šï¼ˆå·¦ç«¯ã®ã€ä¸­å¤®ï¼‰
    xy_path.line_to(w, h / 2)  # ç·šã®å¼•ãçµ‚ã‚ã‚Šã®ä½ç½®è¨­å®šï¼ˆå³ç«¯ã®ã€ä¸­å¤®ï¼‰

    # todo: y line ï¼ˆç¸¦ç·šã‚’å¼•ãï¼‰
    xy_path.move_to(w / 2, 0.0)
    xy_path.line_to(w / 2, h)
    
    ui.set_color('green')
    xy_path.stroke()  # ä½ç½®è¨­å®šã—ãŸãƒ‘ã‚¹ã§ç·šã‚’å¼•ã

    # å††ã‚’æ›¸ãè¨­å®š
    oval_width = 100
    oval_height = 100
    # å††ã®ä¸­å¿ƒä½ç½®ã§ã¯ãªãã€èµ·ç‚¹ãŒå·¦ä¸Šã¨ãªã‚‹ã®ã§
    x = w / 2 - oval_width / 2  # (ç”»é¢æ¨ªå¹…/2) - (å††æ¨ªå¹…/2)
    y = h / 2 - oval_height / 2  # (ç”»é¢ç¸¦å¹…/2) - (å††ç¸¦å¹…/2)

    oval = ui.Path.oval(x, y, oval_width, oval_height)  # èµ·ç‚¹ä½ç½®ã¨ã‚µã‚¤ã‚ºã‚’æŒ‡å®šã—ãŸå††ã‚’ç”Ÿæˆ
    ui.set_color((1.0, 0.0, 0.5, 0.5))
    oval.fill()  # é¢ï¼ˆå†…å´ï¼‰ã‚’å¡—ã‚‹


if __name__ == '__main__':
  main_view = MainView()
  main_view.present(style='fullscreen', orientations=['portrait'])

```

ç·‘ã®åå­—ç·šã¯ã€`move_to` ã®èµ·ç‚¹ã¨`line_to` çµ‚ç‚¹ã§ã€Œã“ã“ã‹ã‚‰ã€ã“ã“ã¾ã§ã€ã‚’x, y åº§æ¨™ç‚¹ã¨ã—ã¦æŒ‡å®šã—ã¾ã™ã€‚

æ¨ªç·šã¯ã€å·¦å´ã‹ã‚‰å³å´ã¸ã€‚ç¸¦ç·šã¯ã€ä¸Šã‹ã‚‰ä¸‹ã¸ã€‚ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚

`stroke` ãŒç·šã‚’ã€`fill` ãŒé¢ã‚’å¡—ã‚‹æŒ‡å®šã§ã€å¡—ã‚‹ç›´å‰ã®`ui.set_color` ã§æŒ‡å®šã—ãŸè‰²ãŒåæ˜ ã•ã‚Œã¾ã™ã€‚

`Path` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆ`pathlib` ã®`Path`ã§ã¯ãªã„ï¼‰ã®ç¹‹ã’æ–¹ã§ã€æ›²ç·šã‚‚è¡¨ç¾ã§ãã¾ã™ã€‚

[ui.Path.add_quad_curve | ui â€” Native GUI for iOS â€” Python 3.6.1 documentation](https://omz-software.com/pythonista/docs/ios/ui.html#ui.Path.add_quad_curve)

https://omz-software.com/pythonista/docs/ios/ui.html#ui.Path.add_quad_curve


## ã‚¢ãƒ—ãƒª(`ui` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«) ã¨ã—ã¦ã®å‹•ã

å‰å›ã®è©±ã«æˆ»ã‚‹ã¨ã€`ui` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®åŸºæœ¬çš„ãªè¨­ç½®ï¼ˆViewï¼‰ã®æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã—ãŸã€‚

 å®Ÿè¡Œãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã€ã‚¢ãƒ—ãƒªãŒç«‹ã¡ä¸ŠãŒã£ãŸå¾Œã¯`delegate` ã‚„`Action` ã‚’ä½¿ã„ã€é©å®œå‡¦ç†ã‚’è¡Œã†ã€‚å®Ÿè¡Œå¾Œã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼å´ã®æŒ‡ç¤ºã‚ˆã‚Šã‚¢ãƒ—ãƒªã®å†…å®¹ãŒå¤‰åŒ–ï¼ˆæ›´æ–°ï¼‰ã—ã¦ã„ãã¾ã™ã€‚

 ãã‚Œã¨ã¯åˆ¥ã®å¤‰åŒ–ï¼ˆæ›´æ–°ï¼‰ã®å‡¦ç†æ–¹æ³•ã¨ã—ã¦ã€å®Ÿè¡Œå¾Œã§ã‚‚ã‚¢ãƒ—ãƒªå´ãŒå¸¸ã«å‹•ãç¶šã‘ã‚‹ã“ã¨ã§å‡¦ç†ã‚’ã—ã¦ã„ãæ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ã€‚

### `update` ãƒ¡ã‚½ãƒƒãƒ‰

æŒ‡å®šã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°æ¯ã«ã€View ãŒæ›´æ–°ã•ã‚Œã¾ã™ã€‚

æ›´æ–°ã•ã›ãŸã„å ´åˆã«ã¯ã€`View.update_interval` ã«ã¦æ›´æ–°é–“éš”ã‚’æŒ‡å®šã—ã¾ã™ã€‚

ãªãŠã€æ›´æ–°é–“éš”ã¯ç§’å˜ä½ã§ã™ã®ã§ã€1ç§’ä»¥ä¸‹ã¯`1/n` ã§æŒ‡å®šã—ã¦ã„ãã¾ã™ã€‚

```py
import ui


class MainView(ui.View):
  def __init__(self):
    self.name = '1/nç§’ ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—'
    self.bg_color = 0.5  # todo: ç°è‰²

    self.update_interval = 1 / 60  # todo: 1ç§’
    self.num_count = 0

    self.label = ui.Label()
    self.label.text = f'{self.num_count}'
    self.label.flex = 'TBLR'
    self.label.bg_color = 1
    self.add_subview(self.label)

  def update(self):
    self.num_count += 1
    self.label.text = f'{self.num_count}'


if __name__ == '__main__':
  main_view = MainView()
  main_view.present(style='fullscreen', orientations=['portrait'])

```

#### `1/1` ç§’ï¼ˆ1ç§’)

``` .py
self.update_interval = 1 / 1
```


![img221122_164327.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/416433cd-29df-0d19-cbe1-3d9b2af082b4.gif)



#### `1/60` ç§’ï¼ˆç´„0.016ç§’)

``` .py
self.update_interval = 1 / 60
```


![img221122_164645.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/ed8a2765-817e-16e6-ccc5-e45541e8646a.gif)

â€» GIF ã§ã™ã¨ã€é€Ÿã™ãã¦è¨³åˆ†ã‹ã‚‰ã‚“ã§ã™ã­ï¼ï¼

### `draw` ã¨`update` ã®çµ„ã¿åˆã‚ã›

çµŒé¨“ä¸Š`update` ã¯å‡¦ç†ãŒé‡ã„ã¨ã€æŒ‡å®šã—ãŸé–“éš”ã§èµ°ã‚‰ãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚æ­£ç¢ºæ€§ã‚ˆã‚Šã‚‚ã€æ›´æ–°ã—ã¦æç”»ã—ã¦ãã‚Œã‚‹ã€‚ç¨‹åº¦ã®èªè­˜ãŒè‰¯ã„ã‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚

å†åº¦ã«ãªã‚Šã¾ã™ãŒã€`ui` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã¯`delegate` ã‚„`Action` ã¨ã„ã£ãŸé©å®œå‘¼ã³å‡ºã—å¯èƒ½ãªå‡¦ç†ãŒã‚ã‚‹ã®ã§ã€ä½¿ã„åˆ†ã‘ã¦ãŠä½¿ã„ãã ã•ã„ã€‚

ã€Œã˜ã‚ƒã‚ã€ã©ã‚“ãªæ™‚ã«ä½¿ã†ğŸ˜¡ã€ã¨ãªã‚Šãã†ã§ã™ãŒã€`draw` ã¨çµ„ã¿åˆã‚ã›ã‚‹ã®ãŒé¢ç™½ã„ã‹ã¨æ€ã„ã¾ã™ã€‚

ã“ã‚“ãªæ„Ÿã˜ã®ã¯å¦‚ä½•ã§ã—ã‚‡ã†ï¼Ÿ


![img221122_181629.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/ff5b40ef-f5c4-18bb-1591-be8d682b584c.gif)


## ãƒ¬ãƒƒãƒ„ï¼ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

ã‚µã‚¤ãƒ³æ³¢ã£ã¦å¯æ„›ã„ã§ã™ã‚ˆã­ã€‚

ã€Œã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¨ã¯ï¼Ÿã€ã¨ã€ãªã‚‹ã¨é•·ããªã£ã¦ã—ã¾ã†ã®ã§å‰²æ„›ã—ã¾ã™ãŒã€ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦çµµã‚’æã“ã†ãœï¼ã¨ã„ã†äº‹ã§ã™ï¼ï¼

`draw` ã®ã¿ã®å®Ÿè£…ã§é™æ­¢ç”»ã ã‘ã§ã‚‚æ¥½ã—ã‚ã¾ã™ãŒã€`update`ã‚’ä½¿ã„æ™‚é–“çµŒéã¨ã¨ã‚‚ã«å¤‰åŒ–ã™ã‚‹ã‚‚ã®ã‚’æãã®ã‚‚é¢ç™½ã„ã§ã™ã€‚

ç§ã€æ•°å­¦ã¯ã€Œå«Œã„å¯„ã‚Šã®è‹¦æ‰‹ã€ãªäººç”Ÿã‚’é€ã£ã¦ã„ã¾ã—ãŸãŒã€ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§ä¸‰è§’é–¢ä¿‚ã‹ã‚‰å‹‰å¼·ã—ç›´ã—ã€ŒãŠã‚‚ã—ã‚Œãƒ¼ã€ã£ã¦ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚

ï¼ˆã€Œå‹‰å¼·ã—ç›´ã—ã€ã‚ˆã‚Šã¯ã€è‰²ã€…ãªã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦é›°å›²æ°—ã§å®Ÿè£…ã—ã€Œã‚ãƒ¼ã€æ•°å­¦çš„ã«ã¯ã“ã†ãªã‚‹ã®ã‹ï¼ã€ã¨é›°å›²æ°—ã§å†èªè­˜ã—ã¦ã„ã‚‹æ„Ÿã˜ã§ã™ï¼‰

æ³¢ã®å‡ºã—æ–¹ä¸€ã¤å–ã£ã¦ã‚‚ã€ã•ã¾ã–ã¾ãªè¦–ç‚¹ã‹ã‚‰ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ãã¾ã™ã€‚

æ­£è§£ã¯ä¸€ã¤ã§ã¯ãªãã€çµæœçš„ã«çµµãŒå‡ºã‚Œã°å‹ã¡ã§ã™ï¼

```py
from math import sin, pi
import ui


class MainView(ui.View):
  def __init__(self):
    self.name = 'sine wave'
    self.bg_color = 0.2

    self.update_interval = 1 / 60
    self.counter = 0  # update æ¯ã«+1 ã—ã¦ã„ã

    self.line_stroke_color = 0.8
    self.segment = 16

  def draw(self):
    wire = ui.Path()
    wire.line_width = 8

    amp = self.height / 6
    for i in range(self.segment):
      x = i / (self.segment - 1) * self.width

      radian = (i / self.segment * pi) + (self.counter / 32)
      y = (amp * sin(radian)) + (self.height / 2)
      if i: wire.line_to(x, y)
      else: wire.move_to(x, y)

    ui.set_color(self.line_stroke_color)
    wire.stroke()

  def update(self):
    self.counter += 1
    self.set_needs_display()


if __name__ == '__main__':
  main_view = MainView()
  main_view.present(style='fullscreen', orientations=['portrait'])

```

### `self.set_needs_display()` ã§å†æç”»

`draw` ãƒ¡ã‚½ãƒƒãƒ‰ã§`update` ã‚’å‘¼ã³å‡ºã™ã«ã¯ã€`View.set_needs_display()` ã‚’ä½¿ã„ã¾ã™ã€‚

`def update(self):` å†…ã§ã€Œå†æç”»ã™ã‚‹ã‚“ã‚„ã§ãƒ¼ã€ã¨`self.set_needs_display()` ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚

ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—å®Ÿè¡Œã™ã‚‹ã¨ã€æç”»ãŒé™æ­¢ã—ã¦ã„ã‚‹ã®ãŒç¢ºèªã§ãã¾ã™ã€‚

```py
  def update(self):
    self.counter += 1
    #self.set_needs_display()
```

ã¡ã‚‡ã£ã¨ã—ãŸå®Ÿé¨“ã§ã™ãŒã€`self.counter` ãŒä¸€å®šæ•°ã‚’è¶ŠãˆãŸã‚‰`draw` ã®å‡¦ç†ã‚’ã€Œä½•ã‚‚ã—ãªã„ã€ã¨ã—ã¦ã¿ã‚‹ã¨ã€ã©ã†ãªã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ

å®Ÿè¡Œã™ã‚‹å‰ã«ã©ã®ã‚ˆã†ã«ãªã‚‹ã‹äºˆæƒ³ã‚’ã—ã€å®Ÿéš›ã®çµæœã¨å·®ç•°ãŒã‚ã‚‹ã‹ï¼Ÿ

ã¨ã€ã‚„ã£ã¦ã¿ã‚‹ã¨æƒ³å®šåŠ›ãŒã¤ãã¨æ€ã„ã¾ã™ã®ã§ã‚„ã£ã¦ã¿ã¦ãã ã•ã„ğŸ’ª

ä»Šå›ã¯ã€`self.counter` ãŒ`150` ã‚’è¶ŠãˆãŸã‚‰`if` åˆ†å²ã§ã€Œä½•ã‚‚ã—ãªã„ã€ã¨ã—ã¦ãŠã‚Šã€`ui.Label` ã§`self.counter` ã®æ•°å€¤ã‚’ç›®è¦–ç¢ºèªã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

``` .py
from math import sin, pi
import ui


class MainView(ui.View):
  def __init__(self):
    self.name = 'ä¸€å®šæ•°ã‚’è¶ŠãˆãŸã‚‰ã€ç©ºæç”»'
    self.bg_color = 0.2

    self.update_interval = 1 / 60
    self.counter = 0
    
    self.label = ui.Label()
    self.label.text = f'{self.counter}'
    self.label.flex = 'TBLR'
    self.label.bg_color = 1
    self.add_subview(self.label)

    self.line_stroke_color = 0.8
    self.segment = 16

  def draw(self):
    if self.counter < 150:
      wire = ui.Path()
      wire.line_width = 8
  
      amp = self.height / 6
      for i in range(self.segment):
        x = i / (self.segment - 1) * self.width
  
        radian = (i / self.segment * pi) + (self.counter / 32)
        y = (amp * sin(radian)) + (self.height / 2)
        if i: wire.line_to(x, y)
        else: wire.move_to(x, y)
  
      ui.set_color(self.line_stroke_color)
      wire.stroke()

  def update(self):
    self.counter += 1
    self.set_needs_display()
    self.label.text = f'{self.counter}'


if __name__ == '__main__':
  main_view = MainView()
  main_view.present(style='fullscreen', orientations=['portrait'])

```


![img221122_190250.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/d9262ede-afd0-733f-74b7-8b7fdce36884.gif)



ãƒ‘ã‚­ãƒƒã¨æ¶ˆãˆã¦ã—ã¾ã„ã¾ã—ãŸã­ï¼

ã¤ã¾ã‚Šã¯ã€`View.set_needs_display()` ã‚’`update` ã§å‘¼ã³å‡ºã™åº¦ã«ã€`draw` ã®å†…å®¹ã‚’æ¯å›æç”»ã—ã¦ãã‚Œã¦ã„ã‚‹ã®ã§ã™ã€‚

ã“ã‚“ãªé«˜é€Ÿã«iPhone ã¡ã‚ƒã‚“ãŒé ‘å¼µã£ã¦ãã‚Œã¦ã„ã‚‹ã‚“ã§ã™ã­ã€œ

### å†æç”»ã§ã¯ãªãã€å‰ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ç¶™ç¶šã•ã›ãŸã„

ã€Œæ¯å›ãƒªã‚»ãƒƒãƒˆã—ã¦æç”»ã•ã‚Œã‚‹ã¨ã€å‰ã®æƒ…å ±ãŒæ¶ˆãˆã¦ã—ã¾ã†ğŸ˜¡ã€ã¨ã„ã†å£°ã‚‚ä¸€éƒ¨ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚

ã¡ã‚‡ã£ã¨åŠ›æŠ€ã§ã™ãŒã€ã“ã‚“ãªã®ã¯å¦‚ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿ

![img221122_194749.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/d1aabd47-c85b-d8b9-b4fd-60e3467e2d63.gif)


```py
from math import sin, pi
import ui

wire = ui.Path()
wire.line_width = 0.5


class MainView(ui.View):
  def __init__(self):
    self.name = 'æç”»çŠ¶æ…‹ã‚’æ®‹ã™'
    self.bg_color = 0.2

    self.update_interval = 1 / 60
    self.counter = 0

    self.line_stroke_color = (0.8, 0.8, 0.8, 0.8)
    self.segment = 4

  def draw(self):
    #wire = ui.Path()
    #wire.line_width = 0.5

    amp = self.height / 6
    for i in range(self.segment):
      x = i / (self.segment - 1) * self.width

      radian = (i / self.segment * pi) + (self.counter / 32)
      y = (amp * sin(radian)) + (self.height / 2)
      if i: wire.line_to(x, y)
      else: wire.move_to(x, y)

    ui.set_color(self.line_stroke_color)
    wire.stroke()

  def update(self):
    self.counter += 1
    self.set_needs_display()


if __name__ == '__main__':
  main_view = MainView()
  main_view.present(style='fullscreen', orientations=['portrait'])

```

`draw` å†…ã§ç”Ÿæˆã—ã¦ã„ãŸ`wire = ui.Path()` ã‚’å¤–ã«å‡ºã—ã¦`update` æ™‚ã«ã€`line_to` ã¨`move_to` ã‚’é‡ã­ãŒã‘ã—ã¦ã„ã¾ã™ã€‚

æç”»ã¸ã®èª¿æ•´ã¨ã—ã¦ä»¥ä¸‹æ•°å€¤ã‚’å¤‰æ›´ã—ã¦ã„ã¾ã™

- ç·šã®å¤ªã•`8` â†’`0.5`
  - `wire.line_width`
- ç·šè‰²ã«é€éï¼ˆ`0.8`ï¼‰
  - `self.line_stroke_color`
- ç·šã®åˆ†å‰²ï¼ˆæŠ˜ã‚Œæ›²ãŒã‚‹éƒ¨åˆ†ï¼‰`16` â†’`4`
  - `self.segment`

ï¼ˆç‰¹ã«ï¼‰`self.segment` ã®æ•°å€¤ã‚’å¢—ã‚„ã™ã¨ã€ã‚‚ã‚Œãªãæ›´æ–°ãŒé‡ããªã‚Šã¾ã™ã€‚


### æ°—è»½ã«æ•°å¼ã‚’æ›¸ãæ›ãˆã¦ã¿ã‚ˆã†

æ•°å€¤ã‚„æ•°å¼ã‚’ã¡ã‚‡ã£ã¨å¤‰æ›´ã™ã‚‹ã ã‘ã§ã€çµæœãŒã‚¬ãƒ©ãƒƒã¨å¤‰ã‚ã‚‹ã¨ã“ã‚ã‚‚ã€ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®é¢ç™½ã•ã ã¨æ€ã„ã¾ã™ã€‚

`draw` å†…ã®`y` ã‚’å®šç¾©ã™ã‚‹éƒ¨åˆ†`sin` ï¼ˆä¸‰è§’é–¢æ•°ã®ã‚µã‚¤ãƒ³ï¼‰ã‚’`tan` ï¼ˆä¸‰è§’é–¢æ•°ã®ã‚¿ãƒ³ã‚¸ã‚§ãƒ³ãƒˆï¼‰ã«å¤‰ãˆã¦ã¿ã¾ã—ãŸï¼

```py
# import ã«tan ã‚’è¿½åŠ 
from math import sin, pi, tan

# ã“ã“ã®sin ã‚’
y = (amp * sin(radian)) + (self.height / 2)

# tan ã«å¤‰æ›´
y = (amp * tan(radian)) + (self.height / 2)
```


![img221122_195006.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/69b21399-430a-786c-2102-efc092b52b1f.gif)


ã‚ãï½ï¼ã‚¿ãƒ³ã‚¸ã‚§ãƒ³ãƒˆã®ç·šï½ï½ï¼



```py
from math import sin, pi, tan
import ui

wire = ui.Path()
wire.line_width = 0.5


class MainView(ui.View):
  def __init__(self):
    self.name = 'sin -> tan'
    self.bg_color = 0.2

    self.update_interval = 1 / 60
    self.counter = 0

    self.line_stroke_color = (0.8, 0.8, 0.8, 0.8)
    self.segment = 8

  def draw(self):
    amp = self.height / 6
    for i in range(self.segment):
      x = i / (self.segment - 1) * self.width

      radian = (i / self.segment * pi) + (self.counter / 32)
      y = (amp * tan(radian)) + (self.height / 2)
      if i: wire.line_to(x, y)
      else: wire.move_to(x, y)

    ui.set_color(self.line_stroke_color)
    wire.stroke()

  def update(self):
    self.counter += 1
    self.set_needs_display()


if __name__ == '__main__':
  main_view = MainView()
  main_view.present(style='fullscreen', orientations=['portrait'])

```


ã†ãƒ¼ã‚“ã€ã‚¿ãƒ³ã‚¸ã‚§ãƒ³ãƒˆã¿ãŒå‡ºã¦ã„ã¾ã™ã­ãˆã€œ

ã¨ã¯ã„ãˆã€æ™‚é–“ãŒçµŒéã™ã‚Œã°ã™ã‚‹ç¨‹ã«é‡ãï¼ˆç”»é¢ã‚‚ç™½ãï¼‰ãªã£ã¦ã„ãã®ã¯ã€ã„ã„å®Ÿè£…ã¨ã¯è¨€ãˆã¾ã›ã‚“ã­ï¼

é…åˆ—ã§ç®¡ç†ã—ã€ä¸€å®šé‡ã®ç·šãŒå‡ºã¦ããŸã‚‰å¤ã„ã‚‚ã®ã‹ã‚‰å‰Šé™¤ã—ãŸã‚Šã€æ¯æç”»ã§è¤‡æ•°ç·šã‚’è¡¨ç¤ºã•ã›ã‚‹ãªã©å·¥å¤«ã®ä½™åœ°ã¯äºŒååˆ†ã«ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚

æœ€çµ‚çš„ã«ã©ã‚“ãªçµµã‚’å‡ºã—ãŸã„ã‹ï¼Ÿã©ã‚“ãªè¡¨ç¾ã‚’ã—ãŸã„ã‹ï¼Ÿã«ã‚ˆã‚Šã€å®Ÿè£…æ–¹æ³•ã¯å¤‰ã‚ã£ã¦ãã¾ã™ã€‚ãœã²æ€ã„æãè¡¨ç¾ã‚’å®Ÿè£…ã—ã¦ã¿ã¦ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ï¼ï¼Ÿ

### ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®æ¢ã—æ–¹

ä»Šå›ã®ã‚µã‚¤ãƒ³æ³¢ã®éƒ¨åˆ†ã¯ã€ã“ã¡ã‚‰ã‚’å‚è€ƒã«ã•ã›ã¦é ‚ãã¾ã—ãŸã€‚

[JavaScriptã§å–ã‚Šçµ„ã‚€ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° - ãƒ‘ãƒ¼ãƒªãƒ³ãƒã‚¤ã‚ºã‚’ä½¿ã„ã“ãªã› - ICS MEDIA](https://ics.media/entry/18812/)

https://ics.media/entry/18812/


Pythonista3 ã§ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¨ãªã‚‹ã¨ã€ãªã‹ãªã‹å®Ÿä¾‹ãŒç„¡ã„ã®ãŒç¾çŠ¶ã§ã™ã€‚

Processing ã‚„ã€p5.js ãªã©ã®ä¾‹ã‹ã‚‰ã€Pythonï¼ˆPythonista3ï¼‰ã«æ›¸ãæ›ãˆã‚‹ã®ãŒè¿‘é“ã‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚

- [Welcome to Processing! / Processing.org](https://processing.org/)

https://processing.org/

- [home | p5.js](https://p5js.org/)

https://p5js.org/

ã‚‚ã¡ã‚ã‚“ã€Python ã‚„Pythonista3 ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã¯ã€Œç„¡ã„ã€é–¢æ•°ã‚’æ°—è»½ã«å‘¼ã³å‡ºã—ãŸã‚Šã—ã¦ã„ã‚‹ã®ã§ã€è‡ªå‰ã§å®Ÿè£…ã™ã‚‹ã‹Python ã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æ¢ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ãƒ‘ãƒ¼ãƒªãƒ³ãƒã‚¤ã‚ºã¨ã‹ãŠã™ã™ã‚ã§ã™ï¼ˆæš—é»’å¾®ç¬‘ï¼‰ã€‚

é•ã†è¨€èªã‚’èª­ã¿æ›¿ãˆã¦ã¿ã‚‹ã®ã¯ã€ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿è§£ãã„ã„è¨“ç·´ã«ãªã£ã¦ã‚‹ãªãã¨æ€ã£ã¦ã„ã¾ã™ã€‚

## æ¬¡å›ã¯

ã¤ã„ã«ã€æœ¬æ€§ã‚’è¡¨ã—ã¦ã—ã¾ã„ã¾ã—ãŸã€‚ã€‚ã€‚

ä»Šå›ã¯ã€ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¨ã—ã¦ã€`ui` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§çµµã‚’æã„ã¦ã¿ã¾ã—ãŸã€‚

å®Ÿè£…æ–¹æ³•ã«ã‚ˆã£ã¦ã€å‡¦ç†ã—ãã‚Œãªã„å ´é¢ãŒã‚ã‚Šã€Œã“ã‚“ãªã‚‚ã‚“ã‹ãƒ¼ã€ã¨ã€è½èƒ†ã—ãŸæ–¹ã€…ã«ã¯æœ—å ±ã§ã™ï¼ˆï¼ï¼Ÿï¼‰ã€‚

Pythonista3 ã«ã¯ã€2Dã‚²ãƒ¼ãƒ ã‚„ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«ç‰¹åŒ–ã—ãŸ`scene` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚

[scene â€” 2D Games and Animations â€” Python 3.6.1 documentation](https://omz-software.com/pythonista/docs/ios/scene.html)

https://omz-software.com/pythonista/docs/ios/scene.html


ã¤ã¾ã‚Šã€ãƒ‹ãƒƒãƒãªPythonista3 ã‚¢ãƒ—ãƒªã¨ã„ã†ä¸­ã§ã€ãƒ‹ãƒƒãƒãªå®Ÿè£…æ–¹æ³•ï¼ˆ`ui` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã®æç”»ï¼‰ã‚’ç´¹ä»‹ã—ã¦ã—ã¾ã„ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ã€‚ã€‚ã€‚

ä»Šå›ã®`ui` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã‚‚ã€æ¬¡å›ã®`scene` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã‚‚ã€ã€Œæ•°å€¤ã®å¾®èª¿æ•´ã‚’ã—ã¦ã„ãŸã‚‰ã€å…ƒã®å€¤ãŒã‚ã‹ã‚‰ãªããªã£ãŸï¼ã€ã¨ã„ã†å ´é¢ãŒå‡ºã¦ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ãã‚“ãªæ™‚ã¯ã€ä»¥å‰ã«ç´¹ä»‹ã—ãŸæ–°è¦ä½œæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ã†ã¨ã€Œå–ã‚Šæ•¢ãˆãšä¸€æ—¦é€€é¿ã€çš„ãªã“ã¨ãŒã§ãã‚‹ã®ã§ã€ãƒ‹ãƒ¼ã‚ºã«åˆè‡´ã—ãŸéš›ã¯ãœã²è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚



ã“ã“ã¾ã§ã€èª­ã‚“ã§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚

## ã›ã‚“ã§ã‚“

### Discord

Pythonista3 ã®æ—¥æœ¬èªã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚ã¿ãªã•ã‚“å„ªã—ãã¦ã€ã‚ã‹ã‚‰ãªã„ã¨ã“ã‚ã‚‚è¦ªèº«ã«æ•™ãˆã¦ãã‚Œã‚‹ã®ã§ã“ã®æ©Ÿä¼šã«è¦—ã„ã¦ã¿ã¦ãã ã•ã„ã€‚

https://t.co/0IOW2hn1VC

### æ›¸ç±

iPhone/iPad ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã™ã‚‹æœ€å¼·ã®æœ¬ã€‚

- [Python ã‚„ Jupyter ã§ iPhone/iPad å…ˆç«¯æ©Ÿèƒ½ã‚’ç°¡å˜ï½¥è‡ªç”±ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ï¼ã€Œæ´»ç”¨ç¯‡ã€ï¼šhirax](https://techbookfest.org/product/1WiyV4LEev3f4YrzesRKWV?productVariantID=axX32srsSgtLtZWUtjkj99)

https://techbookfest.org/product/1WiyV4LEev3f4YrzesRKWV?productVariantID=axX32srsSgtLtZWUtjkj99

- [Python ã‚„ Jupyter ã§ iPhone/iPad å…ˆç«¯æ©Ÿèƒ½ã‚’ç°¡å˜ï½¥è‡ªç”±ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ï¼ã€ŒåœŸå°ç¯‡ã€ï¼šhirax](https://techbookfest.org/product/wTZTyeibm5GQ5XgdfMrEBV?productVariantID=kRDmN1udbEYZUWbETdwL8r)

https://techbookfest.org/product/wTZTyeibm5GQ5XgdfMrEBV?productVariantID=kRDmN1udbEYZUWbETdwL8r

### ãã®ä»–

- ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

[Pythonista3 Advent Calendar 2022](https://qiita.com/advent-calendar/2022/pythonista3) ã§ã®ã‚³ãƒ¼ãƒ‰ã‚’ã¾ã¨ã‚ã¦ã„ã‚‹ãƒªãƒã‚¸ãƒˆãƒªãŒã‚ã‚Šã¾ã™ã€‚

ã‚³ãƒ¼ãƒ‰ã®ã‚¨ãƒ©ãƒ¼ã‚„å¤‰ãªã¨ã“ã‚ã‚„æ”¹å–„ç‚¹ãªã©ã€‚ã”æŒ‡æ‘˜ã‚„PR ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™ãƒ¼

https://github.com/pome-ta/Pythonista3AdventCalendar2022sampleCode

- Twitter

ãªã‚“ã—ã‹ã‚¬ãƒãƒ£ã‚¬ãƒãƒ£ã—ã¦ã„ã¾ã™ãŒã€ãŠæ°—å…¼ã­ãªããŠå£°ãŒã‘ãã ã•ã„ã¾ã›ãƒ¼

https://twitter.com/pome_ta93

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">ã‚„ã‚Œã‚‹ã‹ã€ã‚„ã‚Œãªã„ã‹ã€‚ã§ã¯ãªãã€ã‚„ã‚‹ã‚“ã ã‘ã©ã‚‚ã€ç´¹ä»‹èª¬æ˜ã™ã‚‹ã“ã¨ã¯å°½ããªã„ã¨æ€ã†ã‘ã©ã€ç· ã‚åˆ‡ã‚Šå®ˆã‚Œã‚‹ã‹ï¼Ÿã£ã¦è©±ã‚ˆï¼ï¼ˆã‚¯ã‚ºï¼‰<br><br>Pythonista3 Advent Calendar 2022 <a href="https://t.co/JKUxA525Pt">https://t.co/JKUxA525Pt</a> <a href="https://twitter.com/hashtag/Qiita?src=hash&amp;ref_src=twsrc%5Etfw">#Qiita</a></p>&mdash; pome-ta (@pome_ta93) <a href="https://twitter.com/pome_ta93/status/1588570697777152006?ref_src=twsrc%5Etfw">November 4, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

- GitHub

åŸºæœ¬çš„ã«GitHub ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚ã’ã¦ã„ã‚‹ã®ã§ã€ä½•ã«ãƒãƒã£ã¦ä½•ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã®ã‹è¦³æ¸¬ã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚

https://github.com/pome-ta
