---
title: Pythonista3 ã§AVAudioSourceNode ã‚’ä½¿ã£ã¦éŸ³ã‚’ç”Ÿæˆã—ã¦é³´ã‚‰ãã†ï¼ å‰ç·¨
tags:
  - Python
  - Mobile
  - MobileApp
  - AVAudioEngine
  - Pythonista3
private: false
updated_at: '2026-01-10T16:37:36+09:00'
id: 92a41e15b8eec5b51fb3
organization_url_name: null
slide: false
ignorePublish: false
---

ã“ã®è¨˜äº‹ã¯ã€[Pythonista3 Advent Calendar 2022](https://qiita.com/advent-calendar/2022/pythonista3) ã® 15 æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚

ğŸ‘‡ : 14 æ—¥ç›®

https://qiita.com/pome-ta/items/333029f8852a6e2c2c7d

ğŸ‘‡ : 16 æ—¥ç›®

https://qiita.com/pome-ta/items/aa045a99947e02506f23

https://qiita.com/advent-calendar/2022/pythonista3

ä¸€æ–¹çš„ãªåã£ãŸç›®ç·šã§ã€Pythonista3 ã‚’ç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚

ã»ã¼æ¯æ—¥ iPhoneï¼ˆPythonista3ï¼‰ã§ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ã—ã¦ã„ã‚‹è€…ã§ã™ã€‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚

ä»¥ä¸‹ã€ç§ã® 2022 å¹´ 12 æœˆæ™‚ç‚¹ã®ç’°å¢ƒã§ã™ã€‚

```sysInfo.log
--- SYSTEM INFORMATION ---
* Pythonista 3.3 (330025), Default interpreter 3.6.1
* iOS 16.1.1, model iPhone12,1, resolution (portrait) 828.0 x 1792.0 @ 2.0
```

ä»–ã®ç’°å¢ƒ(iPad ã‚„ç«¯æœ«ã®ç¨®é¡ã€iOS ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³é•ã„)ã§ã¯ã€æ„å›³ã¨ã—ãªã„æŒ™å‹•(ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹)ãªã‚‹å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚ã”äº†æ‰¿ãã ã•ã„ã€‚

ã¡ãªã¿ã«ã€`model iPhone12,1` ã¯ã€iPhone11 ã§ã™ã€‚

## éŸ³ã‚’å‡ºã—ãŸã„

ã€Œãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ã¦ã€ã‚³ãƒ¼ãƒ‰ã®ã¿ã§éŸ³ã‚’å‡ºã™ã€ã¨ã„ã†ã“ã¨ã¯å…¨äººé¡ã®å¤¢ã§ã™ï¼ˆn=1ï¼‰ã€‚

ã¡ã‚‡ã†ã© Audio é–¢ä¿‚ã® API ãŒã‚ã‚‹ã®ã§ã€Pythonista3 ã§å®Ÿè£…ã—ã¾ã—ã‚‡ã†ã€‚

### `AVAudioSourceNode` Class

[AVAudioSourceNode | Apple Developer Documentation](https://developer.apple.com/documentation/avfaudio/avaudiosourcenode?language=objc)

https://developer.apple.com/documentation/avfaudio/avaudiosourcenode?language=objc

> AVAudioSourceNode ã‚¯ãƒ©ã‚¹ã¯ã€AVAudioSourceNodeRenderBlock ã‚’é€šã—ã¦ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ç”¨ã®ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ‡ãƒ¼ã‚¿ã‚’ä¾›çµ¦ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚kAudioUnitProperty_SetRenderCallback ã§ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ¦ãƒ‹ãƒƒãƒˆã®å…¥åŠ›ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’è¨­å®šã™ã‚‹ä»£ã‚ã‚Šã«ã€ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ‡ãƒ¼ã‚¿ã‚’é…ä¿¡ã™ã‚‹ãŸã‚ã®ä¾¿åˆ©ãªæ–¹æ³•ã§ã™ã€‚

iOS13 ã‚ˆã‚Šè¿½åŠ ã•ã‚ŒãŸ`AVAudioSourceNode` ã«ã‚ˆã‚Šã€ä»¥å‰ã‚ˆã‚Šç°¡å˜ã«ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

ä»Šå›ã¯`AVAudioSourceNode` ã®åŠ›ã‚’å€Ÿã‚Šã¦å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚

### å®Œæˆ Demo

GIF ãªã®ã§éŸ³ã¯å‡ºã¾ã›ã‚“ ğŸ™‡

![img221206_201503.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/a26d6085-268b-fe90-d687-5b0f0c91ccb8.gif)

`ui` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®`ui.View` ã‚’ä½¿ã£ã¦ã€Pythonista3 ä¸Šã§ã‚¢ãƒ—ãƒªã®ã‚ˆã†ãªå®Ÿè£…ã«ã—ã¾ã—ãŸã€‚

æ³¢å½¢é–¢ä¿‚ã®é¸æŠã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚‚ã€å®Ÿè£…è² æ‹…è»½æ¸›ã®ãŸã‚`ui` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®`ui.Slider` ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚

çµæœã®ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã¯ã€ç”Ÿæˆã—ãŸæ³¢å½¢æƒ…å ±ã‚’ï¼ˆç„¡ç†çŸ¢ç†ï¼‰ç”»åƒæƒ…å ±ã¨è¦‹ç«‹ã¦ã¦ã€ç”»åƒå¤‰åŒ–ã•ã›ã¦ã„ã¾ã™ã€‚

`matplotlib.image.imsave` ã§æ³¢å½¢æƒ…å ±ã‹ã‚‰ã‚¤ãƒ¡ãƒ¼ã‚¸å¤‰æ›ã€‚å¤‰æ›æƒ…å ±ã‚’`ui.Image` ã¨ã—ã¦ã€`ui.View` ã® View ã«éšæ™‚åæ˜ ã•ã›ã‚‹æµã‚Œã§ã™ã€‚

ä»Šå›ã¯ã€ŒéŸ³ã®æƒ…å ±ã‚’ä½œã‚Šã€éŸ³ã‚’å‡ºã™ã€ãŒãƒ¡ã‚¤ãƒ³ãªã®ã§ã€ãƒ¡ã‚¤ãƒ³ä»¥å¤–ã®å®Ÿè£…ã¯ã‚ã‚Šã‚‚ã®ï¼ˆã®åŠ›æŠ€ï¼‰ã§æ¸ˆã¾ã›ã¾ã™ã€‚`objc_util` ã‹ã‚‰ã€ä»– API ã‚’å‘¼ã³å‡ºã—ã¦å®Ÿè£…ã‚‚é¢ç™½ãã†ã§ã™ã­ã€‚

## å®Ÿè£…

æ¯å›æ¯å›æ‰‹æ¢ã‚Šã§å®Ÿè£…ã‚’ã—ã¦ã„ã¾ã™ã€‚ä»Šå›ã¯ãã‚“ãªå®Ÿéš›ã®æµã‚Œã«æ²¿ã£ã¦é€²ã‚ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚

### ã¨ã‚Šã‚ãˆãšéŸ³ãŒå‡ºã‚‹ä»•çµ„ã¿ã‚’çŸ¥ã‚‹

ã©ã®ã‚ˆã†ã«ã€éŸ³ãŒ

- ä½œã‚‰ã‚Œã‚‹ã®ã‹
- å‡¦ç†ã•ã‚Œã‚‹ã®ã‹
- å‡ºã‚‹ã®ã‹

ã¨ã„ã£ãŸç‚¹ã‚’æ´ã‚ã‚‹ã‚ˆã†ã«ã€`AVAudioSourceNode` ã‚’ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«èª¿ã¹ã¦ã„ãã¾ã™ã€‚

- [ã€iOSã€‘Core Audio ã§ã‚·ãƒ³ã‚»ã‚µã‚¤ã‚¶ãƒ¼ã‚’ä½œã‚‹ - Qiita](https://qiita.com/TokyoYoshida/items/df60ea8585a0223e868b)
  - ã–ã£ãã‚Šã¨ã—ãŸã€è¨­è¨ˆã‚¤ãƒ¡ãƒ¼ã‚¸ãŒæŒã¦ã‚‹
    - æ´¾ç”Ÿã—ãŸä½¿ã„æ–¹ã‚’çŸ¥ã‚Œã‚‹
  - `AVAudioEngine` ã®ä½¿ã„æ–¹ã‚’æ•´ç†ã§ãã‚‹
    - ã€ŒNode ã‚’ã‚³ãƒã‚¯ãƒˆã™ã‚‹ã€ã€Œé€£çµã—ã¦éŸ³ã®æµã‚Œã‚’æ´ã‚€ã€
    - Web Audio API ã«ä¼¼ã¦ã„ã‚‹ã€‚ã¨çŸ¥ã‚Œã‚‹

https://qiita.com/TokyoYoshida/items/df60ea8585a0223e868b

- [AVAudioEngine ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° - Speaker Deck](https://speakerdeck.com/objectiveaudio/avaudioenginederiarutaimurendaringu)
  - ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ‡ãƒ¼ã‚¿ã®æµã‚Œã‚’çŸ¥ã‚Œã‚‹
  - æ°¸ç¶šçš„ã«å‡¦ç†ã‚’ã™ã‚‹å¤§å¤‰ã•ã‚„ã‚·ãƒ“ã‚¢ã•
    - ã€Œãƒã‚¤ãƒ³ã‚¿ã€ï¼Ÿä½•ãã‚Œç¾å‘³ã—ã„ã®ï¼Ÿãªè‡ªåˆ†ã®çŠ¶æ…‹ã®æŠŠæ¡
  - `RenderBlock` ã¨ã—ã¦`Block` å‡¦ç†ãŒå‡ºã¦ããŸã€‚ã¨çŸ¥ã‚Œã‚‹

https://speakerdeck.com/objectiveaudio/avaudioenginederiarutaimurendaringu

ä»–ã«ã‚‚å‚ç…§ã—ãŸã‚µã‚¤ãƒˆã¯ã‚ã‚Šã¾ã™ãŒã€[AVAudioSourceNode | Apple Developer Documentation](https://developer.apple.com/documentation/avfaudio/avaudiosourcenode?language=objc) ã‚’ä¸­å¿ƒã«ä¸Šè¨˜æƒ…å ±ã§å¤§æ ã¯æ´ã‚ã¾ã—ãŸã€‚

ã“ã‚Œã‚ˆã‚Šï¼ˆä»Šå›ã¯ï¼‰Swift ã§æ›¸ã‹ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã€Pythonista3 ã¸ã®æ›¸ãæ›ãˆã‚’å§‹ã‚ã¾ã™ã€‚

### Pythonista3 ã§å‹•ãã‚ˆã†ã«æ›¸ãæ›ãˆã‚‹

ï¼ˆå‰å›ç´¹ä»‹ã—ãŸ`pdbg` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã„ã¾ã™ï¼‰

`objc_util` ã®å‘¼ã³å‡ºã—ãŒå¿…è¦ãªã‚‚ã®ã‚’ç”¨æ„ã—ã¦ãŠãã¾ã™ã€‚å…ˆã«å®£è¨€ã—ã¦ãŠãã“ã¨ã§ã€ä½•ã‚’ä½¿ã†ã‹ã®æŠŠæ¡ã‚‚è¡Œã„ã‚„ã™ããªã‚‹ã¨æ€ã„ã¾ã™ã€‚

`self.set_up` ãƒ¡ã‚½ãƒƒãƒ‰ã§ã€`objc_util` é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã—ã¦ã„ã¾ã™ã€‚

å‚è€ƒã«ã—ã¦ã„ã‚‹ Swift ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ãªãŒã‚‰ã€ãƒãƒãƒãƒã¨å®Ÿè£…ã§ã™ã€‚

ã€Œã“ã‚“ãªãƒ¡ã‚½ãƒƒãƒ‰ã‚ã‚‹ã®ã‹ã—ã‚‰ï¼Ÿã€ã¨ä¸å®‰ã«ãªã£ãŸã‚‰`pdbg.state` ã§ã€ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç¢ºèªã— console ã‚ˆã‚Šã‚³ãƒ”ãƒšã—ã¦å®Ÿè¡Œç¢ºèªã‚’ã—ã¦ã„ãã¾ã™ã€‚

éšæ™‚å®Ÿè¡Œã‚’ã—ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèªã™ã‚‹ã¨ã€ã©ã“ã§ã‚³ã‚±ã¦ã„ã‚‹ã‹åŸå› ãŒæ—©ãåˆ¤æ˜ã§ãã¾ã™ã€‚ã¨ã«ã‹ãã€å®Ÿè¡Œã—ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã„ãªã„ã‹ç¢ºèªã®é€£ç¶šã§ã™ã€‚

ãªã‚“ãªã‚‰ã€class åŒ–ã›ãšã«ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªå¤‰æ•°ã§å‡¦ç†ã‚’ã—ãŸã‚Šã€`self` ã‚’ä»˜ã‘ã¦ inspector ã§ç¢ºèªã™ã‚‹ã®ã‚‚æ‰‹ã§ã™ã€‚

```py
from objc_util import ObjCClass

import pdbg

AVAudioEngine = ObjCClass('AVAudioEngine')
AVAudioSourceNode = ObjCClass('AVAudioSourceNode')
AVAudioFormat = ObjCClass('AVAudioFormat')


class Synth:
  def __init__(self):
    self.audioEngine: AVAudioEngine
    self.sampleRate: float = 44100.0  # set_up ãƒ¡ã‚½ãƒƒãƒ‰: outputNode ã‚ˆã‚Šç¢ºå®š
    self.deltaTime: float = 0.0  # 1/sampleRate æ™‚é–“é–“éš”

    self.set_up()

  def set_up(self):
    audioEngine = AVAudioEngine.new()
    sourceNode = AVAudioSourceNode.alloc()
    mainMixer = audioEngine.mainMixerNode()
    outputNode = audioEngine.outputNode()
    format = outputNode.inputFormatForBus_(0)

    self.sampleRate = format.sampleRate()
    self.deltaTime = 1 / self.sampleRate

    inputFormat = AVAudioFormat.alloc(
    ).initWithCommonFormat_sampleRate_channels_interleaved_(
      format.commonFormat(), self.sampleRate, 1, format.isInterleaved())


if __name__ == '__main__':
  synth = Synth()

```

`inputFormat` ã®å†…å®¹ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€`1 ch,  44100 Hz, Float32` ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™:

```py
pdbg.state(inputFormat)
```

![img221204_190137.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/a7e70923-f067-1efe-ba73-a9fb424d9b53.png)

```
# --- name______
<b'AVAudioFormat': <AVAudioFormat 0x281dd0be0:  1 ch,  44100 Hz, Float32>>
# --- vars( )______
{'_as_parameter_': 10768681952,
 '_cached_methods': {'initWithCommonFormat_sampleRate_channels_interleaved_': <objc_util.ObjCInstanceMethod object at 0x123d54f98>,
                     'retain': <objc_util.ObjCInstanceMethodProxy object at 0x123d54438>},
 'ptr': 10768681952,
 'weakrefs': <WeakValueDictionary at 0x123d54358>}
# --- dir( )______
['channelCount',
 'channelLayout',
 'commonFormat',
 'copy',
 'dealloc',
 'description',
 'encodeWithCoder_',
 'formatDescription',
 'hash',
 'init',
 'initStandardFormatWithSampleRate_channelLayout_',
 'initStandardFormatWithSampleRate_channels_',
 'initWithCMAudioFormatDescription_',
 'initWithCoder_',
ã€œ ä»¥ä¸‹ç•¥ ã€œ

```

### `AudioBuffer` ã¨ã€`ObjCBlock`

ã„ã‚ˆã„ã‚ˆ`AVAudioSourceNode` ã®å‡¦ç†ã«å…¥ã‚Šãã†ã§ã™ã­ã€‚

`Block` å‡¦ç†ãŒå¿…è¦ãã†ã§ã€`ObjCBlock` ã‚’ä½¿ã†ã¨æ€ã„ãã‚„ã€‚ã€‚ã€‚

ã¾ã ã€ä¸‹æº–å‚™ãŒã‚ã‚Šã¾ã™ ğŸ˜‡

`Block` å‡¦ç†ã«æµã—è¾¼ã‚€ãŸã‚ã®ã€`AudioBuffer` ï¼ˆãã—ã¦ã€ãã®é…åˆ—ã®`AudioBufferList`ï¼‰ã®æ§‹é€ ä½“ã‚’å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

#### `ctypes.Structure` ã§æ§‹é€ ä½“ã‚’ç”¨æ„ã™ã‚‹

[AudioBuffer | Apple Developer Documentation](https://developer.apple.com/documentation/coreaudiotypes/audiobuffer?language=objc)

https://developer.apple.com/documentation/coreaudiotypes/audiobuffer?language=objc

Structure ã§ã‚ã‚‹`AudioBuffer` ã€‚Pythonista3 ã§ã¯ç”¨æ„ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã§ã™ã®ã§ã€Python ã®`ctypes.Structure` ã‚’ç”¨ã„ã¦è‡ªåŠ›ã§æŒ‡å®šã—ã¦ã„ãã¾ã™ã€‚

AudioBuffer ã® Documentation ã‚ˆã‚Šåˆ¤æ˜ã—ãŸã“ã¨ã¯

- [mNumberChannels | Apple Developer Documentation](https://developer.apple.com/documentation/coreaudiotypes/audiobuffer/1421973-mnumberchannels?language=objc)
  - Objective-C
    - `UInt32 mNumberChannels;`
  - Python
  - `ctypes.c_uint32`
- [mDataByteSize | Apple Developer Documentation](https://developer.apple.com/documentation/coreaudiotypes/audiobuffer/1422352-mdatabytesize?language=objc)
  - Objective-C
    - `UInt32 mDataByteSize;`
  - Python
    - `ctypes.c_uint32`
- [mData | Apple Developer Documentation](https://developer.apple.com/documentation/coreaudiotypes/audiobuffer/1422625-mdata?language=objc)
  - Objective-C
    - `void *mData;`
  - Python
    - `ctypes.c_void_p`

[ctypes.Structure | ctypes --- Python ã®ãŸã‚ã®å¤–éƒ¨é–¢æ•°ãƒ©ã‚¤ãƒ–ãƒ©ãƒª â€” Python 3.11.0b5 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.python.org/ja/3/library/ctypes.html#ctypes.Structure)

https://docs.python.org/ja/3/library/ctypes.html#ctypes.Structure

[åŸºæœ¬ãƒ‡ãƒ¼ã‚¿å‹ | ctypes --- Python ã®ãŸã‚ã®å¤–éƒ¨é–¢æ•°ãƒ©ã‚¤ãƒ–ãƒ©ãƒª â€” Python 3.11.0b5 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.python.org/ja/3/library/ctypes.html#ctypes-fundamental-data-types-2)

https://docs.python.org/ja/3/library/ctypes.html#ctypes-fundamental-data-types-2

`ctypes` ã®å‹ã§å¯¾å¿œã§ãã‚‹ã“ã¨ã«æ„Ÿè¬ã—ã€æ§‹é€ ä½“ã‚’å®šç¾©ã—ã¾ã™:

```py
import ctypes

class AudioBuffer(ctypes.Structure):
  _fields_ = [
    ('mNumberChannels', ctypes.c_uint32),
    ('mDataByteSize', ctypes.c_uint32),
    ('mData', ctypes.c_void_p),
  ]
```

`_fields_` ã¸ã€tuple ã§å®šç¾©ã—ãŸã‚‚ã®ã‚’é…åˆ—ã§æ ¼ç´ã—ã¾ã™ã€‚

```py
import ctypes
```

ã¨ã—ã¦ã„ã‚‹ç†ç”±ã¯ã€`objc_util` ã§ã‚‚`ctypes` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹ã®ã§ã€Œã“ã‚Œã¯ Python å´ã®å‡¦ç†ã€ã¨ã€ç§ãŒç†è§£ã—ã‚„ã™ãã™ã‚‹ãŸã‚ã§ã™ã€‚

`AudioBufferList` ã‚‚ã€åŒæ§˜ã«

[AudioBufferList | Apple Developer Documentation](https://developer.apple.com/documentation/coreaudiotypes/audiobufferlist?language=objc)

https://developer.apple.com/documentation/coreaudiotypes/audiobufferlist?language=objc

- [mNumberBuffers | Apple Developer Documentation](https://developer.apple.com/documentation/coreaudiotypes/audiobufferlist/1421934-mnumberbuffers?language=objc)
  - Objective-C
    - `UInt32 mNumberBuffers;`
  - Python
    - `ctypes.c_uint32`
- [mBuffers | Apple Developer Documentation](https://developer.apple.com/documentation/coreaudiotypes/audiobufferlist/1422090-mbuffers?language=objc)
  - Objective-C
    - `AudioBuffer mBuffers[1];`
  - Python
    - `AudioBuffer * ãƒãƒ£ãƒ³ãƒãƒ«æ•°`

`mBuffers` ã¯ã€ãƒ¢ãƒãƒ©ãƒ«ã§ã‚ã‚Œã°`1`ã€ã‚¹ãƒ†ãƒ¬ã‚ªã§ã‚ã‚Œã°`2` ã§æŒ‡å®šã—ã¾ã™ã€‚

ãƒãƒ£ãƒ³ãƒãƒ«æ•°ã¯ã€`AudioBufferList` ä»¥å¤–ã§ã‚‚ï¼ˆ`AVAudioFormat` ç­‰ï¼‰ã§ä½¿ç”¨ã™ã‚‹ã®ã§ã€`CHANNEL` ã¨ã—ã¦å¤‰æ•°ã§æŒãŸã›ã¾ã™ã€‚

```py
class AudioBufferList(ctypes.Structure):
  _fields_ = [
    ('mNumberBuffers', ctypes.c_uint32),
    ('mBuffers', AudioBuffer * CHANNEL),
  ]
```

é™çš„å‹ä»˜ã‘è¨€èªã«æ…£ã‚Œã¦ãªã„ã¨ã€ãªã‹ãªã‹é›£ã—ã„ã¨ã“ã‚ã§ã™ã­ã€‚ã€‚ã€‚

```é€”ä¸­çµŒé.py
import ctypes
from objc_util import ObjCClass

import pdbg

CHANNEL = 1

AVAudioEngine = ObjCClass('AVAudioEngine')
AVAudioSourceNode = ObjCClass('AVAudioSourceNode')
AVAudioFormat = ObjCClass('AVAudioFormat')


class AudioBuffer(ctypes.Structure):
  _fields_ = [
    ('mNumberChannels', ctypes.c_uint32),
    ('mDataByteSize', ctypes.c_uint32),
    ('mData', ctypes.c_void_p),
  ]


class AudioBufferList(ctypes.Structure):
  _fields_ = [
    ('mNumberBuffers', ctypes.c_uint32),
    ('mBuffers', AudioBuffer * CHANNEL),
  ]


class Synth:
  def __init__(self):
    self.audioEngine: AVAudioEngine
    self.sampleRate: float = 44100.0  # set_up ãƒ¡ã‚½ãƒƒãƒ‰: outputNode ã‚ˆã‚Šç¢ºå®š
    self.deltaTime: float = 0.0  # 1/sampleRate æ™‚é–“é–“éš”

    self.set_up()

  def set_up(self):
    audioEngine = AVAudioEngine.new()
    sourceNode = AVAudioSourceNode.alloc()
    mainMixer = audioEngine.mainMixerNode()
    outputNode = audioEngine.outputNode()
    format = outputNode.inputFormatForBus_(0)

    self.sampleRate = format.sampleRate()
    self.deltaTime = 1 / self.sampleRate

    inputFormat = AVAudioFormat.alloc(
    ).initWithCommonFormat_sampleRate_channels_interleaved_(
      format.commonFormat(), self.sampleRate, CHANNEL, format.isInterleaved())


if __name__ == '__main__':
  synth = Synth()
```

ï¼ˆã¨ã‚Šã‚ãˆãšã€å®Ÿè¡Œã—ã¦ã‚¨ãƒ©ãƒ¼ãŒãªã„ã‹ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼‰

#### `ObjCBlock` å®Ÿè£…ã¸ã€ã€ã€

`AudioBuffer` ã€`AudioBufferList` ã®æº–å‚™ã‚‚çµ‚ãˆãŸã®ã§ã€ã„ã‚ˆã„ã‚ˆ`ObjCBlock` ã®å®Ÿè£…ã«å…¥ã‚Šã¾ã—ã‚‡ã†ã‹ã€ã€ã€

ãˆï¼Ÿã€Œå‚è€ƒã«ã—ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã ã¨`Block` å‡¦ç†ãŒãªã„ã€ã§ã™ã¨ï¼Ÿ

å†æ²ã—ã¾ã™ãŒã€[ã€iOSã€‘Core Audio ã§ã‚·ãƒ³ã‚»ã‚µã‚¤ã‚¶ãƒ¼ã‚’ä½œã‚‹ - Qiita](https://qiita.com/TokyoYoshida/items/df60ea8585a0223e868b) ã®ã“ã“ã®éƒ¨åˆ†ã§ã™ï¼ˆã¾ã‚‹ã£ã¨è»¢ç”¨ã•ã›ã¦ã‚‚ã‚‰ã£ã¦ã¾ã™ ğŸ™‡ï¼‰:

```Synthesizer.swift
// class Synthesizerã®ä¸€éƒ¨
private var audioSource: AudioSource?

lazy var sourceNode = AVAudioSourceNode { [self] (_, _, frameCount, audioBufferList) -> OSStatus in
    let abl = UnsafeMutableAudioBufferListPointer(audioBufferList)
    guard let oscillator = self.audioSource else {fatalError("Oscillator is nil")}
    for frame in 0..<Int(frameCount) {
        let sampleVal: Float = oscillator.signal(time: self.time)ã€€// ã“ã®éƒ¨åˆ†
        self.time += self.deltaTime
        for buffer in abl {
            let buf: UnsafeMutableBufferPointer<Float> = UnsafeMutableBufferPointer(buffer)
            buf[frame] = sampleVal
        }
    }
    return noErr
}
```

https://qiita.com/TokyoYoshida/items/df60ea8585a0223e868b

ã“ã“ã®`[self]` ã¯:

```swift
lazy var sourceNode = AVAudioSourceNode { [self] (_, _, frameCount, audioBufferList) -> OSStatus in
```

[Synthesizers With AVAudioSourceNode | LarzTech](https://larztech.com/posts/2020/05/synthesizers-avaudioengine/) ã®ã€ŒSetupã€é …ã®ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

`renderBlock`ï¼ˆ=`[self]`ï¼‰ ã¨èª­ã¿æ›¿ãˆã‚‹ã“ã¨ã‚‚ã§ããã†ã§ã™:

```swift
sourceNode = AVAudioSourceNode(renderBlock: { (_, _, frameCount, bufferList) -> OSStatus in
    // TODO: Audio generation
    return noErr
})
```

https://larztech.com/posts/2020/05/synthesizers-avaudioengine/

[AVAudioSourceNode | Apple Developer Documentation](https://developer.apple.com/documentation/avfaudio/avaudiosourcenode?language=objc) Documentation ã«ã‚‚ã€ã™ãã•ã¾`AVAudioSourceNodeRenderBlock` ã¨è¨˜è¼‰ãŒã‚ã‚Šã¾ã—ãŸã€‚

https://developer.apple.com/documentation/avfaudio/avaudiosourcenode?language=objc

ã§ã¯ã€`AVAudioSourceNodeRenderBlock` ã®æ§‹æˆã‚’ã¿ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ã‚‡ã†ã€‚

[AVAudioSourceNodeRenderBlock | Apple Developer Documentation](https://developer.apple.com/documentation/avfaudio/avaudiosourcenoderenderblock?language=objc)

https://developer.apple.com/documentation/avfaudio/avaudiosourcenoderenderblock?language=objc

ã†ãƒ¼ã‚“ Type Alias ã€‚ã€‚ã€‚ã¾ãŸã‚‚ã‚„ã€è‡ªä½œå®Ÿè£…ãŒå¿…è¦ãã†ã§ã™ã­ ğŸ˜‡

è¿”ã‚Šå€¤ãŒ`OSStatus`ï¼ˆ`ctypes.c_int32`ï¼‰ã§ã€ãã‚Œãã‚Œãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒ

- `isSilence`
- `timestamp`
- `frameCount`
- `outputData`

ã¨ã€ãªã£ã¦ãŠã‚Šå‚è€ƒã«ã—ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã§ã¯ã€å‰åŠ 2 ã¤ãŒ`_` ã¨ãªã£ã¦ã„ã‚‹ã®ã§

- `isSilence`
  - `_`
- `timestamp`
  - `_`
- `frameCount`
  - ä½¿ã†
- `outputData`
  - ä½¿ã†

ã“ã®ã‚ˆã†ã«ãªã‚Šãã†ã§ã™ã­ï¼ï¼

å¿…è¦ãªæƒ…å ±ã¯åˆ¤æ˜ã—ãŸã®ã§ï¼ˆè¡Œã£ãŸã‚Šæ¥ãŸã‚Šã§å¿™ã—ã„ã§ã™ãŒï¼‰ã€Pythonista3 ã®`ObjCBlock` ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚

[objc_util.ObjCBlock | objc_util â€” Utilities for bridging Objective-C APIs â€” Python 3.6.1 documentation](https://omz-software.com/pythonista/docs/ios/objc_util.html#objc_util.ObjCBlock)

https://omz-software.com/pythonista/docs/ios/objc_util.html#objc_util.ObjCBlock

`class objc_util.ObjCBlock(func, restype=None, argtypes=None)` ã¨ã‚ã‚‹ã§ã€

- å‘¼ã³å‡ºã™é–¢æ•°ï¼ˆ`func`ï¼‰
- è¿”ã‚Šå€¤ï¼ˆ`restype`ï¼‰
- å¼•æ•°ï¼ˆ`argtypes`ï¼‰

ã“ã‚Œã‚‰ã‚’æº–å‚™ã™ã‚‹ã§ã™ã­ï¼

`source_node_render` é–¢æ•°ã®ç¬¬ä¸€å¼•æ•°`_cmd` ã¯ã€ Pythonista3 ã§å¿…è¦ãªå¿…é ˆã®å¼•æ•°ã§ã™ï¼ˆå‹ã¯ã€`ctypes.c_void_p`ï¼‰ã€‚

`return` ã‚’`0` ã¨ã—ã¦ã„ã¾ã™ã€‚Pythonista3 ã¯ã€ã‚¨ãƒ©ãƒ¼ã§ã‚ã‚‹ã¨åŸºæœ¬çš„ã«è½ã¡ã‚‹ã®ã§æ±ºã‚æ‰“ã¡ã®æˆåŠŸã¨ã—ã¦`0`ï¼ˆ`OSStatus = ctypes.c_int32`ï¼‰ ã‚’è¿”ã™ã‚ˆã†ã«ã—ã¦ã¾ã™

```py
import ctypes
from objc_util import ObjCBlock

CHANNEL = 1
OSStatus = ctypes.c_int32


class AudioBuffer(ctypes.Structure):
  _fields_ = [
    ('mNumberChannels', ctypes.c_uint32),
    ('mDataByteSize', ctypes.c_uint32),
    ('mData', ctypes.c_void_p),
  ]


class AudioBufferList(ctypes.Structure):
  _fields_ = [
    ('mNumberBuffers', ctypes.c_uint32),
    ('mBuffers', AudioBuffer * CHANNEL),
  ]


def source_node_render(_cmd, _isSilence_ptr, _timestamp_ptr, frameCount,
                       outputData_ptr) -> OSStatus:
  # todo: ã“ã“ã«å‡¦ç†ã‚’æ›¸ã
  return 0


render_block = ObjCBlock(
  func=source_node_render,
  restype=OSStatus,
  # ã‚³ãƒ¼ãƒ‰ä¸Š`_` ã¨ãªã£ã¦ã„ã‚‹ç®‡æ‰€ã¯ã€ã¨ã‚Šã‚ãˆãšã®`ctypes.c_void_p`
  argtypes=[
    ctypes.c_void_p,  # _cmd ã®éƒ¨åˆ†
    ctypes.c_void_p,  # _ -> isSilence
    ctypes.c_void_p,  # _ -> timestamp
    ctypes.c_void_p,  # frameCount
    ctypes.POINTER(AudioBufferList)  # outputData
  ])

```

å®Ÿè¡Œã‚’ã—ã¦ã‚‚ã€ä½•ã‚‚èµ·ãã¾ã›ã‚“ãŒé€†ã«ã‚¨ãƒ©ãƒ¼ã‚‚å‡ºã¦ã„ãªã„ã®ã§ã€ç„¡äº‹ã«`ObjCBlock` ãŒå®Œäº†ã—ã¾ã—ãŸã€‚

#### ç¾åœ¨ã®çŠ¶æ³ã‚’çµ„ã¿ä¸Šã’ã‚‹

`class Synth` ã®ä¸­ã«ã€`render_block` ã‚’å…¥ã‚Œã¦æ•´ãˆã¦ã„ãã¾ã™ã€‚

class å†…ã«å…¥ã£ãŸã“ã¨ã§`self.` ã¨ã¤ã‘ãŸã‚Šå¼•æ•°ã«`self` ã‚’è¿½åŠ ã™ã‚‹ãªã©ã€æ°—ã‚’ã¤ã‘ã¦æ›¸ãæ›ãˆã¦ã„ãã¾ã—ã‚‡ã†ã€‚

```é€”ä¸­çµŒé.py
import ctypes
from objc_util import ObjCClass, ObjCBlock

import pdbg

CHANNEL = 1

OSStatus = ctypes.c_int32

AVAudioEngine = ObjCClass('AVAudioEngine')
AVAudioSourceNode = ObjCClass('AVAudioSourceNode')
AVAudioFormat = ObjCClass('AVAudioFormat')


class AudioBuffer(ctypes.Structure):
  _fields_ = [
    ('mNumberChannels', ctypes.c_uint32),
    ('mDataByteSize', ctypes.c_uint32),
    ('mData', ctypes.c_void_p),
  ]


class AudioBufferList(ctypes.Structure):
  _fields_ = [
    ('mNumberBuffers', ctypes.c_uint32),
    ('mBuffers', AudioBuffer * CHANNEL),
  ]


class Synth:
  def __init__(self):
    self.audioEngine: AVAudioEngine
    self.sampleRate: float = 44100.0  # set_up ãƒ¡ã‚½ãƒƒãƒ‰: outputNode ã‚ˆã‚Šç¢ºå®š
    self.deltaTime: float = 0.0  # 1/sampleRate æ™‚é–“é–“éš”

    self.render_block = ObjCBlock(
      self.source_node_render,
      restype=OSStatus,
      argtypes=[
        ctypes.c_void_p, ctypes.c_void_p, ctypes.c_void_p, ctypes.c_void_p,
        ctypes.POINTER(AudioBufferList)
      ])

    self.set_up()

  def set_up(self):
    audioEngine = AVAudioEngine.new()
    sourceNode = AVAudioSourceNode.alloc()
    mainMixer = audioEngine.mainMixerNode()
    outputNode = audioEngine.outputNode()
    format = outputNode.inputFormatForBus_(0)

    self.sampleRate = format.sampleRate()
    self.deltaTime = 1 / self.sampleRate

    inputFormat = AVAudioFormat.alloc(
    ).initWithCommonFormat_sampleRate_channels_interleaved_(
      format.commonFormat(), self.sampleRate, CHANNEL, format.isInterleaved())

    sourceNode.initWithFormat_renderBlock_(inputFormat, self.render_block)

  def source_node_render(self, _cmd, _isSilence_ptr, _timestamp_ptr,
                         frameCount, outputData_ptr) -> OSStatus:
    # todo: ã“ã“ã«å‡¦ç†ã‚’æ›¸ã
    return 0


if __name__ == '__main__':
  synth = Synth()


```

### å…ˆã«å‡ºåŠ›ã‚’ç¹‹ã„ã§ãŠãã¾ã™ã‹

`Block` å®Ÿè£…ã¨ã„ã†ä¸€ã¤ã®å±±å ´ã‚’è¶ŠãˆãŸã®ã§ã€`sourceNode.initWithFormat_renderBlock_` ä»¥é™ã®å‡¦ç†ã‚‚ã‚´ãƒªã‚´ãƒªå®Ÿè£…ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

æ¯”è¼ƒçš„ã«å‚è€ƒã‚³ãƒ¼ãƒ‰ã‚’ç´ ç›´ã«å®Ÿè£…ã—ã¦ã„ã‘ã°ã€ãªã‚“ã¨ã‹ãªã‚Šãã†ã§ã™ã€‚

```
audioEngine ã«sourceNode ã‚’attachNode

sourceNodeï¼ˆéŸ³ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ï¼‰ -> mainMixerï¼ˆå…¨ä½“ã®èª¿æ•´å½¹ï¼‰ -> outputNodeï¼ˆã“ã“ã‹ã‚‰éŸ³ãŒå‡ºã‚‹ï¼‰
```

node ã®ã‚³ãƒã‚¯ãƒˆå‡¦ç†:

```py
audioEngine.attachNode_(sourceNode)
sourceNode.volume = 0.5  # ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’æŠ‘ãˆã¦ã„ã‚‹

audioEngine.connect_to_format_(sourceNode, mainMixer, inputFormat)
audioEngine.connect_to_format_(mainMixer, outputNode, inputFormat)

audioEngine.prepare()
self.audioEngine = audioEngine
```

é–‹å§‹ã¨çµ‚äº†ã®å‡¦ç†:

```py
  def start(self):
    self.audioEngine.startAndReturnError_(None)

  def stop(self):
    self.audioEngine.stop()
```

ã“ã‚Œã‚‰ã‚’`Synth` class ã«å–ã‚Šè¾¼ã¿ã€`.start()` ã‚’å‘¼ã³å‡ºã™ã¨ã€`Block` å‡¦ç†ãŒèµ°ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚

```é€”ä¸­çµŒé.py
import ctypes
from objc_util import ObjCClass, ObjCBlock

import pdbg

CHANNEL = 1

OSStatus = ctypes.c_int32

AVAudioEngine = ObjCClass('AVAudioEngine')
AVAudioSourceNode = ObjCClass('AVAudioSourceNode')
AVAudioFormat = ObjCClass('AVAudioFormat')


class AudioBuffer(ctypes.Structure):
  _fields_ = [
    ('mNumberChannels', ctypes.c_uint32),
    ('mDataByteSize', ctypes.c_uint32),
    ('mData', ctypes.c_void_p),
  ]


class AudioBufferList(ctypes.Structure):
  _fields_ = [
    ('mNumberBuffers', ctypes.c_uint32),
    ('mBuffers', AudioBuffer * CHANNEL),
  ]


class Synth:
  def __init__(self):
    self.audioEngine: AVAudioEngine
    self.sampleRate: float = 44100.0  # set_up ãƒ¡ã‚½ãƒƒãƒ‰: outputNode ã‚ˆã‚Šç¢ºå®š
    self.deltaTime: float = 0.0  # 1/sampleRate æ™‚é–“é–“éš”

    self.render_block = ObjCBlock(
      self.source_node_render,
      restype=OSStatus,
      argtypes=[
        ctypes.c_void_p, ctypes.c_void_p, ctypes.c_void_p, ctypes.c_void_p,
        ctypes.POINTER(AudioBufferList)
      ])

    self.set_up()

  def set_up(self):
    audioEngine = AVAudioEngine.new()
    sourceNode = AVAudioSourceNode.alloc()
    mainMixer = audioEngine.mainMixerNode()
    outputNode = audioEngine.outputNode()
    format = outputNode.inputFormatForBus_(0)

    self.sampleRate = format.sampleRate()
    self.deltaTime = 1 / self.sampleRate

    inputFormat = AVAudioFormat.alloc(
    ).initWithCommonFormat_sampleRate_channels_interleaved_(
      format.commonFormat(), self.sampleRate, CHANNEL, format.isInterleaved())

    sourceNode.initWithFormat_renderBlock_(inputFormat, self.render_block)

    audioEngine.attachNode_(sourceNode)
    sourceNode.volume = 0.2

    audioEngine.connect_to_format_(sourceNode, mainMixer, inputFormat)
    audioEngine.connect_to_format_(mainMixer, outputNode, inputFormat)

    audioEngine.prepare()
    self.audioEngine = audioEngine

  def source_node_render(self, _cmd, _isSilence_ptr, _timestamp_ptr,
                         frameCount, outputData_ptr) -> OSStatus:
    # todo: ã“ã“ã«å‡¦ç†ã‚’æ›¸ã
    print('test')
    return 0

  def start(self):
    self.audioEngine.startAndReturnError_(None)

  def stop(self):
    self.audioEngine.stop()


if __name__ == '__main__':
  synth = Synth()
  synth.start()

```

![img221205_002838.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/0010648d-8c10-dcaf-4bb7-2d4da9585457.gif)

`source_node_render` ãƒ¡ã‚½ãƒƒãƒ‰å†…ã«`print('test')` ã¨å‡ºåŠ›æŒ‡ç¤ºã‚’ã—ã¾ã—ãŸã€‚

çµæœ console ã«`test` ãŒä¹±ç«‹ã—ã¦ã„ã¾ã™ï¼ˆã¾ã ã€ŒéŸ³ã€ã®è¨­å®šã¯ã§ãã¦ã„ã¾ã›ã‚“ã®ã§ã€ç„¡éŸ³ã§ã™ï¼‰ã€‚

ã¾ãŸã€æã‚ã—ã„è©±ã§ã¯ã‚ã‚‹ã®ã§ã™ãŒã€`stop` ã®å‡¦ç†ã‚’æ›¸ã„ãŸã®ã«é–¢ã‚ã‚‰ãšã€ç¾åœ¨æ­¢ã‚ã‚‹æ–¹æ³•ãŒã€ä¸€åº¦ã‚¢ãƒ—ãƒªã‚’å¼·åˆ¶çµ‚äº†ã§ã™ã€‚ã€‚ã€‚ï¼ˆ`time` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãªã©ä½¿ã£ã¦ã€`n` ç§’å¾Œã«`stop` ã‚’å‘¼ã³å‡ºã—ã€çµ‚äº†ã•ã›ã‚‹ãªã©ï¼‰

ä»Šå›ã®çµ‚ã‚ã‚Šã¾ã§ã«ã¯ã€çµ‚äº†æŒ‡ç¤ºã ã›ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã®ã§ã€ã„ã¾ã¯ãã®ã¾ã¾ã«ã—ã¦ãŠãã¾ã™ã€‚

ï¼ˆã¯ã‚„ã sine æ³¢ å‡ºã—ãŸã„ï¼‰

### sine æ³¢ã‚’ç”Ÿæˆã™ã‚‹å‡¦ç†

ã¿ã‚“ãªå¤§å¥½ã sine æ³¢ã¡ã‚ƒã‚“ã§ã™ï¼ï¼

`ObjCBlock` ã®ã€`func` ã«ã¦å®šç¾©ã—ãŸ`source_node_render` ã®ä¸­ã«ã€sine æ³¢ã‚’ç”Ÿæˆã™ã‚‹è¨ˆç®—å¼ã‚’æ›¸ãä¸Šã’ã¾ã™ã€‚

è¨ˆç®—ã—ãŸæ•°å€¤ã®çµæœã‚’ã€ã„ã„æ„Ÿã˜ã«`for` ã§ã¶ã‚“å›ã—ãªãŒã‚‰

`ctypes.POINTER(AudioBufferList)` = `outputData_ptr` ã®å„ buffer ã«ã¶ã¡è¾¼ã‚“ã§ã„ãã®ã§ã™ã€‚

`AVAudioSourceNode` ã¸`renderBlock` ã‚’æ ¼ç´ã™ã‚‹ã¾ã§ã¯çµ‚ãˆã¦ã„ã‚‹ã®ã§ã€ã‚ã¨ã¯å¼ã‚’æ›¸ãè¾¼ã‚€ã ã‘ã§ã™ã­ã‡ â˜ºï¸

```py
# å¼•æ•°ã®å‹ã‚’å¿˜ã‚Œãã†ãªã®ã§ã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å…¥ã‚Œã¾ã—ãŸ
def source_node_render(self,
                       _cmd: ctypes.c_void_p,
                       _isSilence_ptr: ctypes.c_void_p,
                       _timestamp_ptr: ctypes.c_void_p,
                       frameCount: ctypes.c_void_p,
                       outputData_ptr: ctypes.POINTER) -> OSStatus:
  # todo: ã“ã“ã«å‡¦ç†ã‚’æ›¸ã
  ablPointer = outputData_ptr.contents
  for frame in range(frameCount):
    sampleVal = sin(440.0 * 2.0 * pi * self.timex)
    self.timex += self.deltaTime

    for bufferr in range(ablPointer.mNumberBuffers):
      _mData = ablPointer.mBuffers[bufferr].mData
      _pointer = ctypes.POINTER(ctypes.c_float * frameCount)
      buffer = ctypes.cast(_mData, _pointer).contents
      buffer[frame] = sampleVal
    #print('test')
  return 0

```

`math` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§`sin`, `pi` ã‚’å‘¼ã³å‡ºã—ã¦ã„ã¾ã™ã€‚ã“ã®å‡¦ç†ã«ã‚ˆã‚Šã€sine æ³¢ã‚’ç”Ÿæˆ:

```py
sampleVal = sin(440.0 * 2.0 * pi * self.timex)
```

`440.0` ã‚’`880.0` ã«ã™ã‚‹ã¨ã€1 ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–é«˜ã„ãƒ©`A` ã«ãªã‚Šã¾ã™ã€‚

`AudioBufferList` ã®ãƒã‚¤ãƒ³ã‚¿ã¸`for` ã§å›ã—ãŸã‚‚ã®ã‚’ã—ã‹ã‚‹ã¹ãå ´æ‰€ã«æ ¼ç´ã—ã¦ã„ã‚‹ï¼ˆã¿ãŸã„ã§ã™ï¼‰:

```py
for bufferr in range(ablPointer.mNumberBuffers):
  _mData = ablPointer.mBuffers[bufferr].mData
  _pointer = ctypes.POINTER(ctypes.c_float * frameCount)
  buffer = ctypes.cast(_mData, _pointer).contents
  buffer[frame] = sampleVal
```

æ­£ç›´ãªã¨ã“ã‚ã€ãƒã‚¤ãƒ³ã‚¿ã®ç†è§£ãŒè¿½ã„ã¤ã„ã¦ã„ã¾ã›ã‚“ã€‚

Objective-C ã® Documentation ã§ã€å¼•æ•°ã«`*` ãŒå…ˆé ­ã«ã¤ã„ã¦ã„ã‚‹å ´åˆã«ã¯ãƒã‚¤ãƒ³ã‚¿ã‚’æ„è­˜ã—ã¦ã€è©¦è¡ŒéŒ¯èª¤ã‚’ç¹°ã‚Šè¿”ã—ã¦ã„ã¾ã™ã€‚

ã‚³ãƒ¼ãƒ‰ã®å…¨ä½“ã¨ã—ã¦ã¯:

```éŸ³ã‚’æ­¢ã‚ã‚‹ã«ã¯å¼·åˆ¶çµ‚äº†.py
from math import sin, pi
import ctypes

from objc_util import ObjCClass, ObjCBlock

import pdbg

CHANNEL = 1

OSStatus = ctypes.c_int32

AVAudioEngine = ObjCClass('AVAudioEngine')
AVAudioSourceNode = ObjCClass('AVAudioSourceNode')
AVAudioFormat = ObjCClass('AVAudioFormat')


class AudioBuffer(ctypes.Structure):
  _fields_ = [
    ('mNumberChannels', ctypes.c_uint32),
    ('mDataByteSize', ctypes.c_uint32),
    ('mData', ctypes.c_void_p),
  ]


class AudioBufferList(ctypes.Structure):
  _fields_ = [
    ('mNumberBuffers', ctypes.c_uint32),
    ('mBuffers', AudioBuffer * CHANNEL),
  ]


class Synth:
  def __init__(self):
    self.audioEngine: AVAudioEngine
    self.sampleRate: float = 44100.0  # set_up ãƒ¡ã‚½ãƒƒãƒ‰: outputNode ã‚ˆã‚Šç¢ºå®š
    self.deltaTime: float = 0.0  # 1/sampleRate æ™‚é–“é–“éš”
    self.timex: float = 0.0  # Render ã®é–“éš”ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼

    self.render_block = ObjCBlock(
      self.source_node_render,
      restype=OSStatus,
      argtypes=[
        ctypes.c_void_p, ctypes.c_void_p, ctypes.c_void_p, ctypes.c_void_p,
        ctypes.POINTER(AudioBufferList)
      ])

    self.set_up()

  def set_up(self):
    audioEngine = AVAudioEngine.new()
    sourceNode = AVAudioSourceNode.alloc()
    mainMixer = audioEngine.mainMixerNode()
    outputNode = audioEngine.outputNode()
    format = outputNode.inputFormatForBus_(0)

    self.sampleRate = format.sampleRate()
    self.deltaTime = 1 / self.sampleRate

    inputFormat = AVAudioFormat.alloc(
    ).initWithCommonFormat_sampleRate_channels_interleaved_(
      format.commonFormat(), self.sampleRate, CHANNEL, format.isInterleaved())

    sourceNode.initWithFormat_renderBlock_(inputFormat, self.render_block)

    audioEngine.attachNode_(sourceNode)
    sourceNode.volume = 0.1

    audioEngine.connect_to_format_(sourceNode, mainMixer, inputFormat)
    audioEngine.connect_to_format_(mainMixer, outputNode, inputFormat)

    audioEngine.prepare()
    self.audioEngine = audioEngine

  def source_node_render(self,
                         _cmd: ctypes.c_void_p,
                         _isSilence_ptr: ctypes.c_void_p,
                         _timestamp_ptr: ctypes.c_void_p,
                         frameCount: ctypes.c_void_p,
                         outputData_ptr: ctypes.POINTER) -> OSStatus:
    # todo: ã“ã“ã«å‡¦ç†ã‚’æ›¸ã
    ablPointer = outputData_ptr.contents
    for frame in range(frameCount):
      sampleVal = sin(440.0 * 2.0 * pi * self.timex)
      #print(sampleVal)
      self.timex += self.deltaTime

      for bufferr in range(ablPointer.mNumberBuffers):
        _mData = ablPointer.mBuffers[bufferr].mData
        _pointer = ctypes.POINTER(ctypes.c_float * frameCount)
        buffer = ctypes.cast(_mData, _pointer).contents
        buffer[frame] = sampleVal
    return 0

  def start(self):
    self.audioEngine.startAndReturnError_(None)

  def stop(self):
    self.audioEngine.stop()


if __name__ == '__main__':
  synth = Synth()
  synth.start()

```

sine æ³¢ç”Ÿæˆã®ãŸã‚ã«ã€`__init__` ã«`self.timex` ã‚’å®šç¾©ã—ã¦ Render å†…ã§ã€æ•°å€¤ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã›ã¦ã„ã¾ã™ã€‚

`sampleVal` ã‚’`print` ã§å‡ºåŠ›ã™ã‚‹ã¨ãã‚Œã£ã½ã„æ•°å€¤ãŒå‡ºã¦ã„ã¾ã™ã­ï¼

![img221205_131109.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/8506e225-6d77-b9fe-6ce1-973f462de744.gif)

`print` å‡ºåŠ›ä¸­ã¯éŸ³ãŒå‡ºãªããªã£ã¦ã—ã¾ã†ã®ã§ã€ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã™ã‚‹ã¨ã€sine æ³¢ãŒã€Œãƒãƒ¼ãƒ¼ãƒ¼ã€ã¨é³´ã‚Šã¤ã¥ã‘ã¦ã„ã¾ã™ï¼ï¼

ã‚‚ã—éŸ³ãŒå‡ºãªã„å ´åˆã¯ãƒãƒŠãƒ¼ãƒ¢ãƒ¼ãƒ‰ã®å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€è§£é™¤ã—å†å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼ˆéŸ³é‡æ³¨æ„ï¼‰ã€‚

### éŸ³ã‚’æ­¢ã‚ãŸã„

ã€ŒéŸ³ã‚’å‡ºã—ãŸã„ã€è¡å‹•ãŒé”æˆã™ã‚‹ã¨ã€æ¬¡ã¯ã€ŒéŸ³ã‚’æ­¢ã‚ãŸã„ã€ã§ã™ã­ã€‚

äººé–“ã®æ¬²ã®æ·±ã•ã¯æã‚ã—ã„ã‚‚ã®ã§ã™ã€‚è‡ªåˆ†ã§å§‹ã‚ãŸç‰©èªã€ã—ã£ã‹ã‚Šç‰©èªã‚’çµ‚ãˆã¾ã—ã‚‡ã†ã€‚

`ui` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã‚¢ãƒ—ãƒªãƒ©ã‚¤ã‚¯ãªå½¢çŠ¶ã«ã—ã¦ã€View ã‚’é–‰ã˜ï¼ˆçµ‚äº†ã—ï¼‰ãŸã‚‰éŸ³ãŒæ­¢ã¾ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```fix.py
from math import sin, pi
import ctypes

from objc_util import ObjCClass, ObjCBlock
import ui

import pdbg

CHANNEL = 1

OSStatus = ctypes.c_int32

AVAudioEngine = ObjCClass('AVAudioEngine')
AVAudioSourceNode = ObjCClass('AVAudioSourceNode')
AVAudioFormat = ObjCClass('AVAudioFormat')


class AudioBuffer(ctypes.Structure):
  _fields_ = [
    ('mNumberChannels', ctypes.c_uint32),
    ('mDataByteSize', ctypes.c_uint32),
    ('mData', ctypes.c_void_p),
  ]


class AudioBufferList(ctypes.Structure):
  _fields_ = [
    ('mNumberBuffers', ctypes.c_uint32),
    ('mBuffers', AudioBuffer * CHANNEL),
  ]


class Synth:
  def __init__(self):
    self.audioEngine: AVAudioEngine
    self.sampleRate: float = 44100.0  # set_up ãƒ¡ã‚½ãƒƒãƒ‰: outputNode ã‚ˆã‚Šç¢ºå®š
    self.deltaTime: float = 0.0  # 1/sampleRate æ™‚é–“é–“éš”
    self.timex: float = 0.0  # Render ã®é–“éš”ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼

    self.render_block = ObjCBlock(
      self.source_node_render,
      restype=OSStatus,
      argtypes=[
        ctypes.c_void_p, ctypes.c_void_p, ctypes.c_void_p, ctypes.c_void_p,
        ctypes.POINTER(AudioBufferList)
      ])

    self.set_up()

  def set_up(self):
    audioEngine = AVAudioEngine.new()
    sourceNode = AVAudioSourceNode.alloc()
    mainMixer = audioEngine.mainMixerNode()
    outputNode = audioEngine.outputNode()
    format = outputNode.inputFormatForBus_(0)

    self.sampleRate = format.sampleRate()
    self.deltaTime = 1 / self.sampleRate

    inputFormat = AVAudioFormat.alloc(
    ).initWithCommonFormat_sampleRate_channels_interleaved_(
      format.commonFormat(), self.sampleRate, CHANNEL, format.isInterleaved())

    sourceNode.initWithFormat_renderBlock_(inputFormat, self.render_block)

    audioEngine.attachNode_(sourceNode)
    sourceNode.volume = 0.1

    audioEngine.connect_to_format_(sourceNode, mainMixer, inputFormat)
    audioEngine.connect_to_format_(mainMixer, outputNode, inputFormat)

    audioEngine.prepare()
    self.audioEngine = audioEngine

  def source_node_render(self,
                         _cmd: ctypes.c_void_p,
                         _isSilence_ptr: ctypes.c_void_p,
                         _timestamp_ptr: ctypes.c_void_p,
                         frameCount: ctypes.c_void_p,
                         outputData_ptr: ctypes.POINTER) -> OSStatus:
    # todo: ã“ã“ã«å‡¦ç†ã‚’æ›¸ã
    ablPointer = outputData_ptr.contents
    for frame in range(frameCount):
      sampleVal = sin(440.0 * 2.0 * pi * self.timex)
      #self._outlog(sampleVal)
      self.timex += self.deltaTime

      for bufferr in range(ablPointer.mNumberBuffers):
        _mData = ablPointer.mBuffers[bufferr].mData
        _pointer = ctypes.POINTER(ctypes.c_float * frameCount)
        buffer = ctypes.cast(_mData, _pointer).contents
        buffer[frame] = sampleVal
    return 0

  @ui.in_background
  def _outlog(self, value):
    """ ç¢ºèªç”¨ã§åŸºæœ¬å‘¼ã³å‡ºã•ãªã„ """
    print(value)

  def start(self):
    self.audioEngine.startAndReturnError_(None)

  def stop(self):
    self.audioEngine.stop()


class View(ui.View):
  def __init__(self, *args, **kwargs):
    ui.View.__init__(self, *args, **kwargs)
    self.synth = Synth()
    self.synth.start()

  def will_close(self):
    self.synth.stop()


if __name__ == '__main__':
  view = View()
  view.present()
  #view.present(style='fullscreen', orientations=['portrait'])

```

![img221205_140152.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/6989226f-d3c0-09c6-77b3-f538c7e9d144.gif)

`def will_close(self):` ã®ã€Œé–‰ã˜ã‚‹æŒ‡ç¤ºã‚’ã—ãŸæ™‚ã€ã«ã€`Synth` ã®`.stop` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¶ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

#### tips ãã® 1ï¼ˆ`ui.in_background`ï¼‰

GIF ã ã¨ã€éŸ³ãŒå‡ºãªã„ã®ã§ç„¡ç†ã‚„ã‚Š`print` ã§æ•°å€¤ã‚’å‡ºã™ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ï¼ˆ`Synth._outlog`ï¼‰ã€‚

å‡¦ç†ã®é–¢ä¿‚ã§ã€å‡ºåŠ›éŸ³ã«ãƒã‚¤ã‚ºãŒä¹—ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ãŒã€‚ã€‚ã€‚

ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³`@ui.in_background` ã§ã€éŸ³ãŒå‡ºã¤ã¤ console ã¸å‡ºåŠ›ã§ãã‚‹ã‚ˆã†ã«ç„¡ç†ã‚„ã‚Šå®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚ç„¡ç†ã‚„ã‚Šãªã®ã§ã€View ãŒé–‰ã˜ã¦ã‚‚è£å´ã§èµ°ã‚Šç¶šã‘ã¦ã—ã¾ã£ã¦ã„ã¾ã™ã€‚

æ™®æ®µ`Synth._outlog` ã‚’å‘¼ã°ãªãã¦ã„ã„ã§ã™ã—ã€æ›¸ã‹ãªãã¦ã‚‚ã„ã„ã§ã™ã€‚

#### tips ãã® 2ï¼ˆ`View.present`ï¼‰

```py
View.present()
```

ã¨å¼•æ•°ãªã—ã«å‘¼ã³å‡ºã™ã¨ã€`sheet` ã® View ãŒå‡ºã¦ãã¾ã™ã€‚

ã¾ãŸèƒŒæ™¯è‰²ã‚’æŒ‡å®šã—ãªã„ã¨ã€é€éçŠ¶æ…‹ã§å‡ºç¾ã™ã‚‹ã®ã§ã€console ãŒè¦‹ãˆã‚‹çŠ¶æ…‹ã«ãªã‚Šã¾ã™ã€‚

```py
View.present(style='fullscreen')
```

`fullscreen` æŒ‡å®šã«ã™ã‚‹ã¨ã€èƒŒæ™¯è‰²ã‚’æŒ‡å®šã—ãªã„å ´åˆã«ã¯èƒŒæ™¯ãŒé»’ã«ãªã‚Šã¾ã™ï¼ˆæƒ³å®šã™ã‚‹ã«ã€å®Ÿéš›ã¯é»’ã§ã¯ãªãé€éã§`fullscreen` ã®èƒŒé¢ã«ä½•ã‚‚ç„¡ã„ã®ã§äº‹å®Ÿé»’ãè¦‹ãˆã‚‹ï¼‰ã€‚

## å‚è€ƒæ–‡çŒ®

- [ã€iOSã€‘Core Audio ã§ã‚·ãƒ³ã‚»ã‚µã‚¤ã‚¶ãƒ¼ã‚’ä½œã‚‹ - Qiita](https://qiita.com/TokyoYoshida/items/df60ea8585a0223e868b)
- [AVAudioEngine ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° by å…«åå¶‹ç¥æ¨¹ | ãƒˆãƒ¼ã‚¯ | iOSDC Japan 2020 - fortee.jp](https://fortee.jp/iosdc-japan-2020/proposal/2aecd4ec-e173-45fe-8d49-aec1aabc5526)
- [AVAudioEngine ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° - Speaker Deck](https://speakerdeck.com/objectiveaudio/avaudioenginederiarutaimurendaringu)
- [Building a Synthesizer in Swift. Making audio waveforms withâ€¦ | by SwiftMoji | Better Programming](https://betterprogramming.pub/building-a-synthesizer-in-swift-866cd15b731)
- [Building a Signal Generator | Apple Developer Documentation](https://developer.apple.com/documentation/avfaudio/audio_engine/building_a_signal_generator)
- [Synthesizers With AVAudioSourceNode | LarzTech](https://larztech.com/posts/2020/05/synthesizers-avaudioengine/)

## æ¬¡å›ã¯

ä»Šå›ã§ã€ŒéŸ³ã‚’å‡ºã™ã€ã€ŒéŸ³ã‚’æ­¢ã‚ã‚‹ã€ã¾ã§é”æˆã—ã¾ã—ãŸã€‚éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã›ãšã«ã‚³ãƒ¼ãƒ‰ã®ã¿ã§ã€éŸ³ã‚’ä½œã‚Œã‚‹ã®ã§ã™ã­ â˜ºï¸

`source_node_render` é–¢æ•°å†…ã®æ•°å¼ã‚’ç½®ãæ›ãˆã‚‹ã¨ã€è‰²ã€…ãªéŸ³ã«ãªã‚Šã¾ã™ã®ã§ã€ã‚¬ãƒãƒ£ã‚¬ãƒãƒ£æ›¸ãæ›ãˆã¦æ¥½ã—ã‚€ã®ã‚‚ã„ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

å†’é ­ã§ãŠè¦‹ã›ã—ãŸã€å®Œæˆ Demo ã«è¿‘ã¥ããŸã‚æ¬¡å›ã¯

- å‡ºåŠ›éŸ³ã®ç¨®é¡ã‚’å¤‰æ›´ã™ã‚‹
- å‡ºã¦ã„ã‚‹éŸ³ã®å¯è¦–åŒ–

ã®å®Ÿè£…ã‚’é€²ã‚ã¦ã„ãã¾ã™ã€‚

sine æ³¢ï¼ˆæ­£å¼¦æ³¢ï¼‰ãŒç™»å ´ã—ã¾ã—ãŸãŒã€çŸ©å½¢æ³¢ãªã©ã‚·ãƒ³ã‚»ã‚µã‚¤ã‚¶ãƒ¼ã§èã„ãŸã“ã¨ã®ã‚ã‚‹æ³¢ã‚’å‡ºã—ã¾ã—ã‚‡ã†ã€‚

ã“ã“ã¾ã§ã€èª­ã‚“ã§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚

ğŸ‘‡ : 16 æ—¥ç›®

https://qiita.com/pome-ta/items/aa045a99947e02506f23

## ã›ã‚“ã§ã‚“

### Discord

Pythonista3 ã®æ—¥æœ¬èªã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚ã¿ãªã•ã‚“å„ªã—ãã¦ã€ã‚ã‹ã‚‰ãªã„ã¨ã“ã‚ã‚‚è¦ªèº«ã«æ•™ãˆã¦ãã‚Œã‚‹ã®ã§ã“ã®æ©Ÿä¼šã«è¦—ã„ã¦ã¿ã¦ãã ã•ã„ã€‚

https://t.co/0IOW2hn1VC

### æ›¸ç±

iPhone/iPad ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã™ã‚‹æœ€å¼·ã®æœ¬ã€‚

- [Python ã‚„ Jupyter ã§ iPhone/iPad å…ˆç«¯æ©Ÿèƒ½ã‚’ç°¡å˜ï½¥è‡ªç”±ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ï¼ã€Œæ´»ç”¨ç¯‡ã€ï¼šhirax](https://techbookfest.org/product/1WiyV4LEev3f4YrzesRKWV?productVariantID=axX32srsSgtLtZWUtjkj99)

https://techbookfest.org/product/1WiyV4LEev3f4YrzesRKWV?productVariantID=axX32srsSgtLtZWUtjkj99

- [Python ã‚„ Jupyter ã§ iPhone/iPad å…ˆç«¯æ©Ÿèƒ½ã‚’ç°¡å˜ï½¥è‡ªç”±ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ï¼ã€ŒåœŸå°ç¯‡ã€ï¼šhirax](https://techbookfest.org/product/wTZTyeibm5GQ5XgdfMrEBV?productVariantID=kRDmN1udbEYZUWbETdwL8r)

https://techbookfest.org/product/wTZTyeibm5GQ5XgdfMrEBV?productVariantID=kRDmN1udbEYZUWbETdwL8r

### ãã®ä»–

- ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

[Pythonista3 Advent Calendar 2022](https://qiita.com/advent-calendar/2022/pythonista3) ã§ã®ã‚³ãƒ¼ãƒ‰ã‚’ã¾ã¨ã‚ã¦ã„ã‚‹ãƒªãƒã‚¸ãƒˆãƒªãŒã‚ã‚Šã¾ã™ã€‚

ã‚³ãƒ¼ãƒ‰ã®ã‚¨ãƒ©ãƒ¼ã‚„å¤‰ãªã¨ã“ã‚ã‚„æ”¹å–„ç‚¹ãªã©ã€‚ã”æŒ‡æ‘˜ã‚„ PR ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™ãƒ¼

https://github.com/pome-ta/Pythonista3AdventCalendar2022sampleCode

- Twitter

ãªã‚“ã—ã‹ã‚¬ãƒãƒ£ã‚¬ãƒãƒ£ã—ã¦ã„ã¾ã™ãŒã€ãŠæ°—å…¼ã­ãªããŠå£°ãŒã‘ãã ã•ã„ã¾ã›ãƒ¼

https://twitter.com/pome_ta93

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">ã‚„ã‚Œã‚‹ã‹ã€ã‚„ã‚Œãªã„ã‹ã€‚ã§ã¯ãªãã€ã‚„ã‚‹ã‚“ã ã‘ã©ã‚‚ã€ç´¹ä»‹èª¬æ˜ã™ã‚‹ã“ã¨ã¯å°½ããªã„ã¨æ€ã†ã‘ã©ã€ç· ã‚åˆ‡ã‚Šå®ˆã‚Œã‚‹ã‹ï¼Ÿã£ã¦è©±ã‚ˆï¼ï¼ˆã‚¯ã‚ºï¼‰<br><br>Pythonista3 Advent Calendar 2022 <a href="https://t.co/JKUxA525Pt">https://t.co/JKUxA525Pt</a> <a href="https://twitter.com/hashtag/Qiita?src=hash&amp;ref_src=twsrc%5Etfw">#Qiita</a></p>&mdash; pome-ta (@pome_ta93) <a href="https://twitter.com/pome_ta93/status/1588570697777152006?ref_src=twsrc%5Etfw">November 4, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

- GitHub

åŸºæœ¬çš„ã« GitHub ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚ã’ã¦ã„ã‚‹ã®ã§ã€ä½•ã«ãƒãƒã£ã¦ä½•ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã®ã‹è¦³æ¸¬ã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚

https://github.com/pome-ta
