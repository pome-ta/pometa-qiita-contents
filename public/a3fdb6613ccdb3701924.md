---
title: ARKit ã‚’ä½¿ã£ã¦Pythonista3 ã§æ‹¡å¼µç¾å®Ÿä¸–ç•Œã®å¹³é¢ã‚’ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã—ãŸã„
tags:
  - Python
  - AR
  - MobileApp
  - Pythonista3
  - ARKit
private: false
updated_at: '2026-01-10T16:37:36+09:00'
id: a3fdb6613ccdb3701924
organization_url_name: null
slide: false
ignorePublish: false
---

ã“ã®è¨˜äº‹ã¯ã€[Pythonista3 Advent Calendar 2022](https://qiita.com/advent-calendar/2022/pythonista3) ã® 20 æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚

ğŸ‘‡ : 19 æ—¥ç›®

https://qiita.com/pome-ta/items/29785f0edbe582210d2f

ğŸ‘‡ : 21 æ—¥ç›®

https://qiita.com/pome-ta/items/0aa69205fb3826d9951d

https://qiita.com/advent-calendar/2022/pythonista3

ä¸€æ–¹çš„ãªåã£ãŸç›®ç·šã§ã€Pythonista3 ã‚’ç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚

ã»ã¼æ¯æ—¥ iPhoneï¼ˆPythonista3ï¼‰ã§ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ã—ã¦ã„ã‚‹è€…ã§ã™ã€‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚

ä»¥ä¸‹ã€ç§ã® 2022 å¹´ 12 æœˆæ™‚ç‚¹ã®ç’°å¢ƒã§ã™ã€‚

```sysInfo.log
--- SYSTEM INFORMATION ---
* Pythonista 3.3 (330025), Default interpreter 3.6.1
* iOS 16.1.1, model iPhone12,1, resolution (portrait) 828.0 x 1792.0 @ 2.0
```

ä»–ã®ç’°å¢ƒ(iPad ã‚„ç«¯æœ«ã®ç¨®é¡ã€iOS ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³é•ã„)ã§ã¯ã€æ„å›³ã¨ã—ãªã„æŒ™å‹•(ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹)ãªã‚‹å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚ã”äº†æ‰¿ãã ã•ã„ã€‚

ã¡ãªã¿ã«ã€`model iPhone12,1` ã¯ã€iPhone11 ã§ã™ã€‚

## ã“ã®è¨˜äº‹ã§ã‚ã‹ã‚‹ã“ã¨

- ARKit ã® AR World Tracking å‡¦ç†
- Tracking æƒ…å ±ã‹ã‚‰ã€ãƒ‘ãƒãƒ«ã‚’å¼µã‚‹
- `objc_util` ã®`delegate` å®Ÿè£…

## ç¾å®Ÿä¸–ç•Œã®æƒ…å ±ã‚’æ´ã‚€

å‰å›ã¯ã€ARKit ã®æœ€å°ã®å®Ÿè£…æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚

æœ€å°ã®å®Ÿè£…ã§ã¯ã€SceneKit ã§å‘¼ã³å‡ºã—ãŸ`box` ã¯ã€ãã®å ´ã§å›è»¢ã—ç¶šã‘ã‚‹ã®ã¿ã§ã—ãŸã€‚

ä»Šå›ã¯ã€ã‚«ãƒ¡ãƒ©ã‹ã‚‰ã®ç¾å®Ÿä¸–ç•Œã®å¹³é¢ã‚’è¦‹ã¤ã‘ãŸéš›ã«ã€å¹³é¢ã®ãƒ‘ãƒãƒ«ã‚’å‘¼ã³å‡ºã™ã‚ˆã†ã«ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

SceneKit å´ã®å‡¦ç†ã¯é€šå¸¸é€šã‚Šãªã®ã§ã™ãŒã€`objc_util` ã§å‘¼ã³å‡ºã™`delegate` å‡¦ç†ãŒé¢å€’ã‹ã¤ç‰¹æ®Šã§ã™ã€‚

`objc_util` ã®`delegate` ã‚’ä¸­å¿ƒã«è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

### `delegate` ï¼Ÿ

ã€ŒæŒ‡å®šã®äº‹æŸ„ãŒç™ºç”Ÿã—ãŸã‚‰å‘¼ã³å‡ºã•ã‚Œã‚‹ã€å‡¦ç†ã§ã™ã€‚ã‚ã¡ã‚ƒãã¡ã‚ƒã–ã£ãã‚Šã§ã™ãŒã€‚ã€‚ã€‚

`AVAudioEngine` å›ã§`Block` å‡¦ç†ã‚’ä½¿ã„ã¾ã—ãŸãŒã€`objc_util` çš„ã«ã¯ä¼¼ãŸé¢å€’ã•ã§ä¼¼ãŸå‡¦ç†ã§ã™ï¼ˆç§çš„ã«ã¯ï¼‰ã€‚

ä»Šå›ã§ã™ã¨ã€Œå¹³é¢æƒ…å ±ã‚’å–å¾—ã—ãŸã‚‰ã€ã®æ¡ä»¶ä¸‹ã§å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

[create_objc_class | objc_util â€” Utilities for bridging Objective-C APIs â€” Python 3.6.1 documentation](https://omz-software.com/pythonista/docs/ios/objc_util.html#objc_util.create_objc_class)

https://omz-software.com/pythonista/docs/ios/objc_util.html#objc_util.create_objc_class

`objc_util.create_objc_class` ã§ã€æ–°ãŸã«`objc_util` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã® class ã‚’ä½œã‚‹ã“ã¨ã§`delegate` ãŒå®Ÿè£…ã§ãã¾ã™ã€‚

å‚ç…§ã—ã¦ã„ã‚‹å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã§ã€Delegate å‡¦ç†ãŒå‡ºã¦ããŸå ´åˆã«ã¯ã€Documentation ã§æ¤œç´¢ã‚’ã—å¿…è¦ãªæƒ…å ±ã‚’æ¢ã—ã¦ã„ãã¾ã™ã€‚
Objective-Cã€Swift ã® Delegate ã«é–¢ã—ã¦ã¯ã€ä»¥ä¸‹ã®è¨˜äº‹ã‹ã‚‰æ˜ã£ã¦ã„ãã¨ç†è§£ãŒæ·±ã¾ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

[Swift ã«ãŠã‘ã‚‹ Delegate ã¨ã¯ä½•ã‹ã€ãªãœä½¿ã†ã®ã‹ - Qiita](https://qiita.com/st43/items/9f9990d76cefa1909ef4)

https://qiita.com/st43/items/9f9990d76cefa1909ef4

#### `methods`

`methods` ã«ã€`delegate` ã§å‡¦ç†ã•ã‚Œã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒ‡å®šã—ã¾ã™ã€‚

ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€`delegate` ã«å­˜åœ¨ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰åã‚’å®šç¾©ã—ã¦ã€ãã®ä¸­ã§å‡¦ç†ã‚’æ›¸ã„ã¦ã„ãã“ã¨ã«ãªã‚Šã¾ã™ã€‚

å¼•æ•°ã«ã¯ã€å®Ÿåœ¨ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã®ä»–ã«`_self, _cmd` ã‚’å…ˆé ­ã«è¨­ç½®ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

[renderer:didAddNode:forAnchor: | Apple Developer Documentation](https://developer.apple.com/documentation/arkit/arscnviewdelegate/2865794-renderer?language=objc)

https://developer.apple.com/documentation/arkit/arscnviewdelegate/2865794-renderer?language=objc

é…åˆ—ã§æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€è¤‡æ•°ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒ‡å®šã§ãã¾ã™ã€‚

#### `protocols`

`delegate` ã¯ã€Protocol ã¨ã—ã¦å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€å‘¼ã³å‡ºã—ãŸã„`delegate` ã‚’æŒ‡å®šã—ã¾ã™ã€‚

ä»Šå›ã¯`ARSCNView` ã®`delegate` ãªã®ã§ã€`ARSCNViewDelegate` ã§ã™ã€‚

[ARSCNViewDelegate | Apple Developer Documentation](https://developer.apple.com/documentation/arkit/arscnviewdelegate?language=objc)

https://developer.apple.com/documentation/arkit/arscnviewdelegate?language=objc

#### `def create_delegate(self):` ãƒ¡ã‚½ãƒƒãƒ‰

Pythonista3 ã®ä»–ã®`delegate` å®Ÿè£…ã¯ã€ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å¤–ã«æ›¸ã„ã¦ã€ãƒ¡ã‚½ãƒƒãƒ‰å†…ã®å¤‰æ•°ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«åŒ–ã—ã¦ã„ã¾ã™ã€‚

å®Ÿè£…ä¸Šã¯ã€ä½•ã®å•é¡Œã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚ãŸã ç§ã®ã“ã ã‚ã‚Šã¨ã—ã¦ã€class å†…ã§å®šç¾©ã‚’ã—ã€ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ class å†…ã«åã‚ã¦ã„ã¾ã™ã€‚

å‡¦ç†ä¸Šã§ã€é¢å€’ã«ãªã£ã¦ã—ã¾ã£ãŸå ´åˆã«ã¯ç´ ç›´ã«`global` ã§ã„ã„ã¨æ€ã„ã¾ã™ã€‚ã€‚ã€‚ã€‚

## å®Ÿè£…

å‰å›ã®ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã€ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¦å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚

`ViewController` class ã‚’å®šç¾©ã—ãŸã®ã¯ã€ã“ã®å‡¦ç†ã‹ã‚‰`ARSCNView` ã§ã‚³ãƒã‚³ãƒã™ã‚‹ã“ã¨ãŒå¤šããªã‚‹ã®ã§ã€ã‚³ãƒ¼ãƒ‰ã®è¦‹é€šã—ã®è¦³ç‚¹ã‹ã‚‰`View` class ã¨åˆ†ã‘ã¦ã„ã¾ã™ã€‚

```py
from math import pi

from objc_util import load_framework, ObjCClass, ObjCInstance, create_objc_class
from objc_util import UIColor
import ui

import pdbg

load_framework('ARKit')

ARSCNView = ObjCClass('ARSCNView')
ARWorldTrackingConfiguration = ObjCClass('ARWorldTrackingConfiguration')

SCNScene = ObjCClass('SCNScene')
SCNNode = ObjCClass('SCNNode')
SCNPlane = ObjCClass('SCNPlane')


class GameScene:
  def __init__(self):
    self.scene: SCNScene
    self.setUpScene()

  def setUpScene(self):
    scene = SCNScene.scene()
    self.scene = scene


class ViewController:
  def __init__(self):
    self.sceneView: ARSCNView
    self.scene: GameScene
    self.viewDidLoad()
    self.viewWillAppear()

  def viewDidLoad(self):
    scene = GameScene()

    _frame = ((0, 0), (100, 100))
    sceneView = ARSCNView.alloc().initWithFrame_(_frame)
    sceneView.autoresizingMask = (1 << 1) | (1 << 4)

    _delegate = self.create_delegate()
    sceneView.delegate = _delegate

    sceneView.autoenablesDefaultLighting = True
    sceneView.showsStatistics = True
    ''' debugOptions
    OptionNone = 0
    ShowPhysicsShapes = (1 << 0)
    ShowBoundingBoxes = (1 << 1)
    ShowLightInfluences = (1 << 2)
    ShowLightExtents = (1 << 3)
    ShowPhysicsFields = (1 << 4)
    ShowWireframe = (1 << 5)
    RenderAsWireframe = (1 << 6)
    ShowSkeletons = (1 << 7)
    ShowCreases = (1 << 8)
    ShowConstraints = (1 << 9)
    ShowCameras = (1 << 10)
    ARSCNDebugOptionShowFeaturePoints = (1 << 30)
    ARSCNDebugOptionShowWorldOrigin = (1 << 32)
    '''
    _debugOptions = (1 << 1) | (1 << 30) | (1 << 32)
    sceneView.debugOptions = _debugOptions
    sceneView.scene = scene.scene
    sceneView.autorelease()
    self.scene = scene
    self.sceneView = sceneView

  def viewWillAppear(self):
    self.resetTracking()

  def viewWillDisappear(self):
    self.sceneView.session().pause()

  def resetTracking(self):
    _configuration = ARWorldTrackingConfiguration.new()
    _configuration.planeDetection = (1 << 0)
    self.sceneView.session().runWithConfiguration_(_configuration)

  def create_delegate(self):
    # --- /delegate
    def renderer_didAddNode_forAnchor_(_self, _cmd, renderer, _node, _anchor):
      node = ObjCInstance(_node)
      planeAnchor = ObjCInstance(_anchor)
      _width = planeAnchor.planeExtent().width()
      _height = planeAnchor.planeExtent().height()
      geometry = SCNPlane.planeWithWidth_height_(_width, _height)
      geometry.firstMaterial().diffuse().contents = UIColor.color(
        red=1.0, green=0.0, blue=0.0, alpha=0.8)
      planeNode = SCNNode.nodeWithGeometry_(geometry)
      planeNode.eulerAngles = (-pi / 2.0, 0.0, 0.0)
      node.addChildNode_(planeNode)

    def renderer_didUpdateNode_forAnchor_(_self, _cmd, renderer, node, anchor):
      pass

    # --- delegate/

    _methods = [
      renderer_didAddNode_forAnchor_,
      renderer_didUpdateNode_forAnchor_,
    ]
    _protocols = ['ARSCNViewDelegate']

    renderer_delegate = create_objc_class(
      'renderer_delegate', methods=_methods, protocols=_protocols)
    return renderer_delegate.new()


class View(ui.View):
  def __init__(self, *args, **kwargs):
    ui.View.__init__(self, *args, **kwargs)
    self.bg_color = 'maroon'
    self.vc = ViewController()
    self.objc_instance.addSubview_(self.vc.sceneView)

  def will_close(self):
    self.vc.viewWillDisappear()


if __name__ == '__main__':
  view = View()
  view.present(style='fullscreen', orientations=['portrait'])

```

å…ˆã«ã€`objc_util` å´ã®å‡¦ç†ï¼ˆ`delegate`ï¼‰ã‹ã‚‰è¦‹ã¦ã„ãã¾ã™ã€‚

### `delegate` ã®å®Ÿè£…

class `ViewController` ã«ã€`create_delegate` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”Ÿã‚„ã—ã¦ã„ã¾ã™ã€‚

ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§ã€Delegate ã¨ã—ã¦å‘¼ã³å‡ºã™ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚

`objc_util.create_objc_class` ã§ã€class åŒ–ã—`.new()` ã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã—ãŸã‚‚ã®ã‚’è¿”ã—ã¦ã„ã¾ã™ã€‚

`ViewController.viewDidLoad` ä¸Šã§`ARSCNView.delegate` ã¸æ ¼ç´ã™ã‚‹ã“ã¨ã§ Delegate ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚

```py

def create_delegate(self):
  # objc_util ã§Delegate ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã®ã€ãƒ¡ã‚½ãƒƒãƒ‰æº–å‚™
  # --- /delegate
  # ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§ã€é–¢æ•°ã‚’å®šç¾©ã™ã‚‹
  # 1ã¤ã‚
  def renderer_didAddNode_forAnchor_(_self, _cmd, renderer, _node, _anchor):
    node = ObjCInstance(_node)  # å¼•æ•°ã®å¤‰æ•°ã‚’ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã™ã‚‹

    planeAnchor = ObjCInstance(_anchor) # tracking ã§å¾—ãŸæƒ…å ±
    _width = planeAnchor.planeExtent().width()
    _height = planeAnchor.planeExtent().height()

    # SceneKit ã§ã®ç”Ÿæˆæ–¹æ³•ã¨åŒã˜
    geometry = SCNPlane.planeWithWidth_height_(_width, _height)
    geometry.firstMaterial().diffuse().contents = UIColor.color(
      red=1.0, green=0.0, blue=0.0, alpha=0.8)
    planeNode = SCNNode.nodeWithGeometry_(geometry)
    planeNode.eulerAngles = (-pi / 2.0, 0.0, 0.0)
    node.addChildNode_(planeNode) # rootNode ã¯ã€å¼•æ•°_node ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã—ãŸã‚‚ã®

  # 2ã¤ã‚
  def renderer_didUpdateNode_forAnchor_(_self, _cmd, renderer, node, anchor):
    # æƒ…å ±ãŒå¤‰æ›´ï¼ˆã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆï¼‰ ã•ã‚ŒãŸæ™‚ã®å‡¦ç†ã‚’æŒ‡å®šã§ãã‚‹ã€‚
    # add ã—ãŸãƒ‘ãƒãƒ«ã®Node ã®é¢ç©æƒ…å ±ã‚’æ›´æ–°ã—ãŸã‚Šãªã©
    pass
  # --- delegate/ delegate ç”Ÿæˆæ™‚ã®ãƒ¡ã‚½ãƒƒãƒ‰ä½œã‚ŠãŠã‚ã‚Š

  # ä¸Šè¨˜ã§å®šç¾©ã—ãŸé–¢æ•°ã‚’æ ¼ç´
  _methods = [
    renderer_didAddNode_forAnchor_,
    renderer_didUpdateNode_forAnchor_,
  ]
  _protocols = ['ARSCNViewDelegate']

  # ç¬¬ä¸€å¼•æ•°ã¯ã€å¤‰æ•°åã‚’æ–‡å­—åˆ—ã§æŒ‡å®šã™ã‚‹
  renderer_delegate = create_objc_class(
    'renderer_delegate', methods=_methods, protocols=_protocols)
  return renderer_delegate.new() # ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã—ã¦è¿”ã™

```

#### `renderer_didAddNode_forAnchor_` ã®å¼•æ•°

`objc_util` ã®`delegate` å‡¦ç†ã®å¼•æ•°ã¯ã€å¾€ã€…ã«ã—ã¦ãã®ã¾ã¾ã§ã¯ä½¿ãˆã¾ã›ã‚“ã€‚`ObjCInstance(å¼•æ•°)` ã¨ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã—ã¦ã‹ã‚‰ã€å‡¦ç†ã‚’ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

`print` ã§å®Ÿä½“ã‚’ç¢ºèªã™ã‚‹ãªã©ã—ã¦ã€å¤‰æ•°ã®çŠ¶æ…‹ã‚’ç¢ºèªã—é©å®œå¯¾å¿œã‚’å¤‰ãˆã¦ã„ãã¾ã™ã€‚

å¼•æ•°ã®`_node` ã¯`rootNode`ã€‚`_anchor` ã«ã¯ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã§å–å¾—ã—ãŸæƒ…å ±ãŒå…¥ã£ã¦ã„ã¾ã™ã€‚

ãã‚Œãã‚Œ`ObjCInstance` ã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã—ã€å¹³é¢æƒ…å ±ã‚’å–å¾—ã—ãŸéš›ã«ãƒ‘ãƒãƒ«ã‚’å‘¼ã³å‡ºã™å‡¦ç†ã‚’ã—ã¦ã„ã¾ã™ã€‚

### `renderer_didAddNode_forAnchor_` ã¨`renderer_didUpdateNode_forAnchor_` ã®å‡¦ç†

ã‚µãƒ³ãƒ—ãƒ«ã§æ•£è¦‹ã™ã‚‹`extent` ã¯éæ¨å¥¨ã¨ãªã£ã¦ã„ãŸãŸã‚ã€`planeExtent` ã§ç¸¦æ¨ªå¹…ã®æƒ…å ±ã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚

[extent | Apple Developer Documentation](https://developer.apple.com/documentation/arkit/arplaneanchor/2882055-extent?language=objc)

https://developer.apple.com/documentation/arkit/arplaneanchor/2882055-extent?language=objc

[planeExtent | Apple Developer Documentation](https://developer.apple.com/documentation/arkit/arplaneanchor/3950858-planeextent?language=objc)

https://developer.apple.com/documentation/arkit/arplaneanchor/3950858-planeextent?language=objc

ãƒ‘ãƒãƒ«ã¯ã€X è»¸ã«é¢ã—ã¦ç”Ÿæˆã•ã‚Œã‚‹ã®ã§ã€Z è»¸ã«å‘ã‘ã‚‹å‡¦ç†ã‚’ã—ã¦ã„ã¾ã™ã€‚

```py
planeNode.eulerAngles = (-pi / 2.0, 0.0, 0.0)
```

æœ¬æ¥ã¯`SCNMatrix4MakeRotation` ç­‰ã®è¡Œåˆ—å‡¦ç†ã‚’ãŠã“ãªã„ãŸã„ã¨ã“ã‚ã§ã™ãŒã€`objc_util` ã¨ Matrix ã‚„ simd é–¢ä¿‚ã®æ§‹é€ ä½“ã®ç›¸æ€§ãŒã‚ã¾ã‚Šã‚ˆããªãã€é•ã†æ–¹æ³•ã§å›è»¢ã‚’ã•ã›ã¦ã„ã¾ã™ã€‚

ã¾ã ã¾ã èª¿æŸ»ä¸è¶³ã®éƒ¨åˆ†ã§ã™ã®ã§ã€æ–°ã—ã„ç™ºè¦‹ãŒã‚ã‚Šã¾ã—ãŸã‚‰ã€è¿½ã£ã¦å ±å‘Šã‚’ã—ã¾ã™ã€‚

[SCNMatrix4MakeRotation | Apple Developer Documentation](https://developer.apple.com/documentation/scenekit/1409686-scnmatrix4makerotation?language=objc)

https://developer.apple.com/documentation/scenekit/1409686-scnmatrix4makerotation?language=objc

[SCNMatrix4 | Apple Developer Documentation](https://developer.apple.com/documentation/scenekit/scnmatrix4?language=objc)

https://developer.apple.com/documentation/scenekit/scnmatrix4?language=objc

ã¡ãªã¿ã«`ARSCNViewDelegate` ã«ã¯ã€è¤‡æ•°ã® Delegate ãŒã‚ã‚Šã¾ã™ãŒã€ä»Šå›ã¯ä»®ã« 2 ã¤å‘¼ã³å‡ºã—ã‚’ã—ã¦ 1 ã¤ã‚’å®Ÿè£…ã«ä½¿ã£ã¦ã„ã¾ã™ã€‚

ï¼ˆ`renderer_didAddNode_forAnchor_` ã®ã¿ã§ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ï¼‰

### `.planeDetection = (1 << 0)` æŒ‡å®š

```py
def resetTracking(self):
  _configuration = ARWorldTrackingConfiguration.new()
  _configuration.planeDetection = (1 << 0)
  self.sceneView.session().runWithConfiguration_(_configuration)
```

Tracking ã®å–å¾—ã‚’ Horizontalï¼ˆæ°´å¹³ï¼‰ã€Verticalï¼ˆå‚ç›´ï¼‰ã§æŒ‡å®šã—ã¾ã™ã€‚

ç›´æ¥ã€å€¤ï¼ˆæ–‡å­—åˆ—ãªã©ã§ï¼‰ã‚’æŒ‡å®šã—ãŸã„ã¨ã“ã‚ã§ã™ãŒã€Enumeration Case ã¨ãªã£ã¦ã„ã¾ã™ã€‚

- [ARPlaneDetectionHorizontal | Apple Developer Documentation](https://developer.apple.com/documentation/arkit/arplanedetection/arplanedetectionhorizontal?language=objc)
  - `ARPlaneDetectionHorizontal = (1 << 0)`
- [ARPlaneDetectionVertical | Apple Developer Documentation](https://developer.apple.com/documentation/arkit/arplanedetection/arplanedetectionvertical?language=objc)
  - `ARPlaneDetectionVertical = (1 << 1)`

ä»Šå›ã¯ã€å¹³é¢ã®å–å¾—ã‚’ã—ãŸã„ã®ã§æ°´å¹³ã‚’é¸æŠã—ã¾ã™ã€‚

`_configuration.planeDetection = (1 << 0)`

https://developer.apple.com/documentation/arkit/arplanedetection/arplanedetectionhorizontal?language=objc

https://developer.apple.com/documentation/arkit/arplanedetection/arplanedetectionvertical?language=objc

## æ¬¡å›ã¯

`delegate` ã®äº‹å‰å‡¦ç†ã‚’çµ‚ãˆãŸã‚‰ã€ãã®ä»–ã¯ç°¡å˜ã«ï¼ˆ`delegate` ã¨æ¯”è¼ƒã—ã¦ï¼‰å®Ÿè£…ãŒã§ãã¾ã—ãŸã‹ã­ï¼Ÿ

Pythonista3 ã§ã€Œã§ããªã•ãã†ãªã“ã¨ã€ ã‚‚ãŠä¼ãˆãŒã§ããŸç‚¹ãŒã€å€‹äººçš„ã«è‰¯ã‹ã£ãŸã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚

Matrix ã‚„ simd ã«é–¢ã—ã¦ã€ç‹¬è‡ªå®Ÿè£…ã§ã¯ãªã`objc_util` ã§ã—ã‚Œã£ã¨ä½¿ã†æ–¹æ³•ã‚’çŸ¥ã£ã¦ã„ã‚‹æ–¹ï¼ã”é€£çµ¡ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™ã€‚

ä»Šå›ã¾ã§ãƒªã‚¢ã‚«ãƒ¡ãƒ©ã‚’ä½¿ã£ãŸ AR ã§ã—ãŸã®ã§ã€æ¬¡å›ã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚«ãƒ¡ãƒ©ã‚’ä½¿ã£ãŸãƒ•ã‚§ã‚¤ã‚¹ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚’ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

ã“ã“ã¾ã§ã€èª­ã‚“ã§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚

ğŸ‘‡ : 21 æ—¥ç›®

https://qiita.com/pome-ta/items/0aa69205fb3826d9951d

## å‚è€ƒæ–‡çŒ®

- [Apple ARKit by Example. With the beta release of ARKit byâ€¦ | by Mark Dawson | Mark Dawson](https://blog.markdaws.net/apple-arkit-by-example-ef1c8578fb59)
- [å‹•ã‹ã—ã¦å­¦ã¶ ARKit ~å¹³é¢æ¤œå‡º~ | DevelopersIO](https://dev.classmethod.jp/articles/plane_detection_arkit/)
- [ARKit å…¥é–€ / å¹³é¢ã®æ¤œå‡º(1)ï½œ npaka ï½œ note](https://note.com/npaka/n/n5e05236dbd17)

## ã›ã‚“ã§ã‚“

### Discord

Pythonista3 ã®æ—¥æœ¬èªã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚ã¿ãªã•ã‚“å„ªã—ãã¦ã€ã‚ã‹ã‚‰ãªã„ã¨ã“ã‚ã‚‚è¦ªèº«ã«æ•™ãˆã¦ãã‚Œã‚‹ã®ã§ã“ã®æ©Ÿä¼šã«è¦—ã„ã¦ã¿ã¦ãã ã•ã„ã€‚

https://t.co/0IOW2hn1VC

### æ›¸ç±

iPhone/iPad ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã™ã‚‹æœ€å¼·ã®æœ¬ã€‚

- [Python ã‚„ Jupyter ã§ iPhone/iPad å…ˆç«¯æ©Ÿèƒ½ã‚’ç°¡å˜ï½¥è‡ªç”±ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ï¼ã€Œæ´»ç”¨ç¯‡ã€ï¼šhirax](https://techbookfest.org/product/1WiyV4LEev3f4YrzesRKWV?productVariantID=axX32srsSgtLtZWUtjkj99)

https://techbookfest.org/product/1WiyV4LEev3f4YrzesRKWV?productVariantID=axX32srsSgtLtZWUtjkj99

- [Python ã‚„ Jupyter ã§ iPhone/iPad å…ˆç«¯æ©Ÿèƒ½ã‚’ç°¡å˜ï½¥è‡ªç”±ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ï¼ã€ŒåœŸå°ç¯‡ã€ï¼šhirax](https://techbookfest.org/product/wTZTyeibm5GQ5XgdfMrEBV?productVariantID=kRDmN1udbEYZUWbETdwL8r)

https://techbookfest.org/product/wTZTyeibm5GQ5XgdfMrEBV?productVariantID=kRDmN1udbEYZUWbETdwL8r

### ãã®ä»–

- ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

[Pythonista3 Advent Calendar 2022](https://qiita.com/advent-calendar/2022/pythonista3) ã§ã®ã‚³ãƒ¼ãƒ‰ã‚’ã¾ã¨ã‚ã¦ã„ã‚‹ãƒªãƒã‚¸ãƒˆãƒªãŒã‚ã‚Šã¾ã™ã€‚

ã‚³ãƒ¼ãƒ‰ã®ã‚¨ãƒ©ãƒ¼ã‚„å¤‰ãªã¨ã“ã‚ã‚„æ”¹å–„ç‚¹ãªã©ã€‚ã”æŒ‡æ‘˜ã‚„ PR ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™ãƒ¼

https://github.com/pome-ta/Pythonista3AdventCalendar2022sampleCode

- Twitter

ãªã‚“ã—ã‹ã‚¬ãƒãƒ£ã‚¬ãƒãƒ£ã—ã¦ã„ã¾ã™ãŒã€ãŠæ°—å…¼ã­ãªããŠå£°ãŒã‘ãã ã•ã„ã¾ã›ãƒ¼

https://twitter.com/pome_ta93

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">ã‚„ã‚Œã‚‹ã‹ã€ã‚„ã‚Œãªã„ã‹ã€‚ã§ã¯ãªãã€ã‚„ã‚‹ã‚“ã ã‘ã©ã‚‚ã€ç´¹ä»‹èª¬æ˜ã™ã‚‹ã“ã¨ã¯å°½ããªã„ã¨æ€ã†ã‘ã©ã€ç· ã‚åˆ‡ã‚Šå®ˆã‚Œã‚‹ã‹ï¼Ÿã£ã¦è©±ã‚ˆï¼ï¼ˆã‚¯ã‚ºï¼‰<br><br>Pythonista3 Advent Calendar 2022 <a href="https://t.co/JKUxA525Pt">https://t.co/JKUxA525Pt</a> <a href="https://twitter.com/hashtag/Qiita?src=hash&amp;ref_src=twsrc%5Etfw">#Qiita</a></p>&mdash; pome-ta (@pome_ta93) <a href="https://twitter.com/pome_ta93/status/1588570697777152006?ref_src=twsrc%5Etfw">November 4, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

- GitHub

åŸºæœ¬çš„ã« GitHub ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚ã’ã¦ã„ã‚‹ã®ã§ã€ä½•ã«ãƒãƒã£ã¦ä½•ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã®ã‹è¦³æ¸¬ã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚

https://github.com/pome-ta
