---
title: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ¢è¨ªã®å±€åœ°ã¸ï¼OS ã®ä¸­èº«ã‚’è¦—ãã«è¡Œã“ã†ï¼ï¼ˆä¸–ã®ä¸­ã«ã‚ã‚‹Pythonista3 ã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚«ã‚¹ã‚¿ãƒ ã—ã¦ã‚ˆã‚Šè‰¯ã„ãƒ„ãƒ¼ãƒ«ã¸ï¼‰
tags:
  - Python
  - Mobile
  - MobileApp
  - Pythonista3
private: false
updated_at: '2026-01-10T16:37:36+09:00'
id: e6f32e0a24d93618f5a9
organization_url_name: null
slide: false
ignorePublish: false
---

ã“ã®è¨˜äº‹ã¯ã€[Pythonista3 Advent Calendar 2022](https://qiita.com/advent-calendar/2022/pythonista3) ã® 12 æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚

ğŸ‘‡ : 11 æ—¥ç›®

https://qiita.com/pome-ta/items/3315732c8db62a55b86b

ğŸ‘‡ : 13 æ—¥ç›®

https://qiita.com/pome-ta/items/fd66f3c1c7ee6a34282e

https://qiita.com/advent-calendar/2022/pythonista3

ã»ã¼æ¯æ—¥ iPhoneï¼ˆPythonista3ï¼‰ã§ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ã—ã¦ã„ã‚‹è€…ã§ã™ã€‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚

ä¸€æ–¹çš„ãªåã£ãŸç›®ç·šã§ã€Pythonista3 ã‚’ç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚

ä»¥ä¸‹ã€ç§ã® 2022 å¹´ 12 æœˆæ™‚ç‚¹ã®ç’°å¢ƒã§ã™ã€‚

```sysInfo.log
--- SYSTEM INFORMATION ---
* Pythonista 3.3 (330025), Default interpreter 3.6.1
* iOS 16.1.1, model iPhone12,1, resolution (portrait) 828.0 x 1792.0 @ 2.0) 828.0 x 1792.0 @ 2.0
```

ä»–ã®ç’°å¢ƒ(iPad ã‚„ç«¯æœ«ã®ç¨®é¡ã€iOS ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³é•ã„)ã§ã¯ã€æ„å›³ã¨ã—ãªã„æŒ™å‹•(ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹)ãªã‚‹å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚ã”äº†æ‰¿ãã ã•ã„ã€‚

ã¡ãªã¿ã«ã€`model iPhone12,1` ã¯ã€iPhone11 ã§ã™ã€‚

## ã‚‚ã† Pythonista3 ã¯ã€iOSï¼ˆiPadOSï¼‰ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãªã‚“ã§ã™ã‚

ï¼ˆç™ºè¨€è€…ãŒãŠã£ã•ã‚“ãªã®ã‹ãŠå¬¢æ§˜ãªã®ã‹ã¯å„è‡ªã®ã”æƒ³åƒã«ãŠä»»ã›ã—ã¾ã™ï¼‰

å‰å›ãƒ»å‰ã€…å›ã¨ Pythonista3 ã§ã€Pythonista3 ã®å†…éƒ¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã‚’ç¢ºèªã—ã€å®Ÿéš›ã«ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã‚’ã—ã¾ã—ãŸã€‚

`print` ã‚’ä½¿ã£ãŸ console å‡ºåŠ›ã§ã¯ã€

```
æ›¸ã â†’ å®Ÿè¡Œ â†’ ç¢ºèª â†’ ï¼ˆãƒ¡ãƒ¢ï¼‰ â†’ æ›¸ãæ›ãˆ â†’ å®Ÿè¡Œ â†’ ç¢ºèª...
```

ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã€ãªã‹ãªã‹éª¨ãŒæŠ˜ã‚Œã‚‹ä½œæ¥­ã§ã—ãŸã€‚

ãã“ã§`webbrowser` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã„ã€GUI ä¸Šã§ç¢ºèªãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé–“ã®ç§»å‹•ã‚‚å®¹æ˜“ã«ãªã£ãŸã‚‰ãŠã‹ã’ã§ã€è©²å½“ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèªã‚‚ã€æ™®æ®µã® Pythonista3 æ“ä½œã¨åŒæ§˜ã«ãŠã“ãªãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

macOS ã® Finderã€Windows ã® Explorer ã«è¿‘ã—ã„æ„Ÿè¦šã«ãªã£ã¦ã„ãã®ã‚‚ã¾ãŸã€å¬‰ã—ã„ã‚‚ã®ã§ã™ã­ã€‚

ä»Šå›ã¯ Pythonista3 å†…éƒ¨ã‚ˆã‚Šåºƒã„è¦–é‡ã‚’æŒã¡ã€iOS, iPadOS ã®ä¸­èº«ã‚’è¦‹ã«è¡Œã“ã†ã¨ãŠã‚‚ã„ã¾ã™ã€‚

### æ³¨æ„äº‹é …

:::note warn
å…è²¬äº‹é …ã¨ã—ã¦æ›¸ã„ã¦ã„ã¾ã™ã€‚
:::

ã‚¢ãƒ—ãƒªã‚„ OS å†…éƒ¨æ§‹é€ ã‚’æ“ä½œã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

å¤‰æ›´ã‚„å‰Šé™¤ã§ã€ã‚¢ãƒ—ãƒªã‚„ OS ãŒèµ·å‹•ä¸å¯ã«ãªã‚‹ã“ã¨ã‚‚ã‚ã‚Šãˆã¾ã™ã€‚

ä¸å…·åˆã«é–¢ã—ã¦ã¯è‡ªå·±è²¬ä»»ã§ãŠé¡˜ã„è‡´ã—ã¾ã™ã€‚

### macOS ã§ï¼ˆã‚ˆãï¼‰è¦‹ã‚‹ã‚ã‚Œ

`iOS` ã® rootï¼ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®æœ€ä¸Šä½ï¼‰ã®æ§‹æˆã‚’ã¿ã¦ã¿ã¾ã—ã‚‡ã†:

```
/
  - .ba
  - .file
  - .mb
  - Applications
  - Developer
  - Library
  - System
  - bin
  - cores
  - dev
  - etc
  - private
  - sbin
  - tmp
  - usr
  - var

```

å®Ÿè¡Œã—ãŸã‚³ãƒ¼ãƒ‰:

```py
from pathlib import Path
import webbrowser


def parent_level(level_int):
  return '../' * level_int


origin_path = Path()
level = 9

target_path = origin_path / parent_level(level)

show_list = sorted(list(target_path.glob('*')))
print(target_path.resolve())
for i in show_list:
  print('  - ' + i.name)

#webbrowser.open(f'pythonista3:/{target_path}')

```

macOS ã‚’ãŠä½¿ã„ã®æ–¹ãªã‚‰ã€ãªã‚“ã¨ãªãè¦‹è¦šãˆãŒã‚ã‚‹ãƒ•ã‚©ãƒ«ãƒ€åãŒã‚ã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ

ã–ã£ã¨ã”ç´¹ä»‹ã§ããã†ãªã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ï¼

å…ˆã»ã©ä½¿ã£ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆå‡ºåŠ›ç”¨ã‚³ãƒ¼ãƒ‰ã«ã€ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆãªã©ã—ã¦å†åˆ©ç”¨ã—ã¾ã—ã‚‡ã†ã‹:

```py
from pathlib import Path
import webbrowser


def parent_level(level_int):
  return '../' * level_int


origin_path = Path()
level = 9

target_path = origin_path / parent_level(level)
'''
show_list = sorted(list(target_path.glob('*')))
print(target_path.resolve())
for i in show_list:
  print('  - ' + i.name)
'''
webbrowser.open(f'pythonista3:/{target_path}')

```

![img221129_023203.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/11fd4e5b-b815-88db-d3fa-3adafcc58c74.gif)

#### `/System/Library/Audio/UISounds/`

iPhone ã®ã‚µã‚¦ãƒ³ãƒ‰ãƒ‡ãƒ¼ã‚¿ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã„ã¤ã‚‚ãŠé¦´æŸ“ã¿ã®ã‚‚ã®ã‚„ã€Œã“ã‚Œã©ã“ã§ä½¿ã‚ã‚Œã¦ã‚‹ã‚“ã€çš„ãªã‚‚ã®ã‚‚ã‚ã‚Šã¾ã™ã­ã€‚

[pome-ta/pysta-UISounds](https://github.com/pome-ta/pysta-UISounds)

https://github.com/pome-ta/pysta-UISounds

ã‚µã‚¦ãƒ³ãƒ‰ç¢ºèªç”¨ã¨ã€OS ãŒæ›´æ–°ã•ã‚ŒãŸæ™‚ã«ã‚µã‚¦ãƒ³ãƒ‰ã«å·®åˆ†ãŒãªã„ã‹ç¢ºèªã™ã‚‹ç”¨ã§ä½œã£ãŸãƒªãƒã‚¸ãƒˆãƒªã§ã™ã€‚

ï¼ˆGIF ãªã®ã§éŸ³ãŒé³´ã‚Šã¾ã›ã‚“ãŒã€é›°å›²æ°—ã ã‘ã§ã‚‚ï¼‰

![img221129_121144.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/b412b1cd-fc8c-5da1-9431-3bad00cf5440.gif)

- [list.py | pome-ta/pysta-UISounds](https://github.com/pome-ta/pysta-UISounds/blob/master/list.py)
  - `ui` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®`tableview` ã¨ã€`ListDataSource` ã‚’ä½¿ç”¨
  - ä¸€åˆ—ä¸€æŒ™ã«è¡¨ç¤ºã•ã‚Œã‚‹
  - ã‚µã‚¦ãƒ³ãƒ‰åã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨éŸ³ãŒç¢ºèªã§ãã‚‹
  - ã‚ã‚ã›ã¦ã€ã‚¿ãƒƒãƒ—ã‚’ã™ã‚‹ã¨ console ã«ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’è¡¨ç¤º

https://github.com/pome-ta/pysta-UISounds/blob/master/list.py

![img221129_121223.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/07c829bc-a1ec-4ebb-6d95-cbdd0d6281aa.png)

ç¾åœ¨ã€294 ã»ã©ã®ã‚µã‚¦ãƒ³ãƒ‰ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã¿ãŸã„ã§ã™ï¼ˆ`0` ã‚«ã‚¦ãƒ³ãƒˆã‚¹ã‚¿ãƒ¼ãƒˆãªã®ã§ï¼‰ã€‚

![img221129_121231.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/865e8e3b-0896-885f-39fa-3d8a12b8b2ef.png)

- [pad.py | pome-ta/pysta-UISounds](https://github.com/pome-ta/pysta-UISounds/blob/master/pad.py)
  - `ui` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨
  - 4 åˆ—ã§åˆ†ã‘ã€ãƒ‘ãƒƒãƒ‰ã§ã‚µãƒ³ãƒ—ãƒ©ãƒ¼ã®ã‚ˆã†ãªå®Ÿè£…
  - ã‚¿ãƒƒãƒ—ã‚’ã™ã‚‹ã¨ã€ãã®ç®‡æ‰€ã‚’å¼·èª¿ã™ã‚‹ã‚ˆã†ãªã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
  - navigationView å³ä¸Šã®ãƒœã‚¿ãƒ³ã§ã€ç¾åœ¨å†ç”Ÿä¸­ã®ã‚µã‚¦ãƒ³ãƒ‰åœæ­¢

![img221129_121755.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/92c18311-2fe0-a71b-2b2d-c3b249e620fb.gif)

https://github.com/pome-ta/pysta-UISounds/blob/master/pad.py

![img221129_121837.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/42c6f43b-1454-8e3c-d306-2e994ad1d092.png)

- [outputlog.py | pome-ta/pysta-UISounds](https://github.com/pome-ta/pysta-UISounds/blob/master/outputlog.py)
  - å®Ÿè¡Œæ™‚ã® OS ã¨ã€`/System/Library/Audio/UISounds/` æƒ…å ±ã‚’å‡ºåŠ›
  - [README.md | pome-ta/pysta-UISounds](https://github.com/pome-ta/pysta-UISounds/blob/master/README.md) ã¸ç›´æ¥è²¼ã‚Šä»˜ã‘ã§ãã‚‹ã‚ˆã†æ•´å½¢
  - diff ç¢ºèªãŒã§ãã‚‹

#### `/System/Library/Frameworks/`

Framework ã®ä¸€è¦§ã§ã™ã€‚ãˆï¼Ÿãªã‚“ã® Framework ã‹ï¼Ÿ

iOS é–‹ç™ºã™ã‚‹éš›ã«ä½¿ç”¨ã™ã‚‹ Framework ãŸã¡ã§ã™

- [AVFoundation | Apple Developer Documentation](https://developer.apple.com/documentation/avfoundation?language=objc)
- [CarPlay | Apple Developer Documentation](https://developer.apple.com/documentation/carplay?language=objc)
- [SwiftUI | Apple Developer Documentation](https://developer.apple.com/documentation/swiftui/)
- [UIKit - æ—¥æœ¬èªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ - Apple Developer](https://developer.apple.com/jp/documentation/uikit/)

ãªã©ãªã©ãªã©ãªã©ã€ã€ã€

æ®‹å¿µãªã‚‰ãŒãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ä¸Šï¼ˆï¼Ÿï¼‰ä¸­èº«ã‚’è¦‹ã‚‹ã“ã¨ã¾ã§ã¯ã§ãã¾ã›ã‚“ãŒã€ã‚µã‚¤ãƒˆã® Documentation ã§ã¯ãªãä¸€è¦§ãŒç¢ºèªã§ãã‚‹ã®ã¯å£®è¦³ã§ã™ã­ã€‚

ã¡ãªã¿ã«`/System/Library/PrivateFrameworks/` ã‚‚ä¸€è¦§ç¢ºèªã§ãã¾ã™ã€‚ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãªã®ã§ã‚‚ã¡ã‚ã‚“ Documentation ã«æƒ…å ±ãŒãªã„ Framework ã§ã™ã€‚

## ãƒ•ã‚¡ã‚¤ãƒ«ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ã§ã‚‚ä½œã‚Šã¾ã™ã‹ï¼Ÿ

ã„ã¾ã¾ã§ã€`webbrowser.open` ã‚’ä½¿ã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ¢ç´¢ã‚’ã—ã¦ãã¾ã—ãŸã€‚

`webbrowser` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã‚‚ä¸éƒ½åˆã¯ç„¡ã„ã®ã§ã™ãŒã€`UISounds/` ã®ä¸€è¦§ãŒè¦‹ã‚ŒãŸã‚ˆã†ã«`ui` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç­‰ã‚’ä½¿ã£ã¦ä½•ã‹ã—ã‚‰ã§ããã†ã§ã™ã­ï¼ˆ`webbrowser.open` ã® 1 è¡Œã£ã¦ã®å¯‚ã—ã•ãŒã‚ã‚Šã¾ã™ï¼ˆè¶£å‘³ã®å ´åˆã®ã¿é™å®šï¼‰ï¼‰ã€‚

### Pythonista ã®é›†åˆçŸ¥

æ¤œç´¢ã‚’ã™ã‚Œã°æ–­ç‰‡çš„ã«å‡ºã¦ãã¾ã™ã—ã€[Pythonista Community Forum](https://forum.omz-software.com/category/5/pythonista) ã‹ã‚‰ã€è§£æ±ºã—ã¦ãã†ãªã‚³ãƒ¼ãƒ‰ã‚’æŒã£ã¦ãã‚‹ã®ã‚‚ã‚ã‚Šã§ã™ã€‚ã—ã‹ã—ã€çµæ§‹ç…©é›‘ãªä½œæ¥­ã§ã™ã€‚

https://forum.omz-software.com/category/5/pythonista

å®Ÿã¯ Pythonista3 ã® Pythonista ãŸã¡ãŒæ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ãŒã€ã¾ã¨ã¾ã£ã¦ã„ã‚‹ãƒªãƒã‚¸ãƒˆãƒªãŒã‚ã‚Šã¾ã™ã€‚

[tdamdouni/Pythonista: Collection of Python Scripts written for Pythonista iOS App](https://github.com/tdamdouni/Pythonista)

https://github.com/tdamdouni/Pythonista

ã‚ã¡ã‚ƒãã¡ã‚ƒã‚ã‚Šã¾ã™ã€‚ç”¨é€”ã”ã¨ã«åˆ†ã‘ã‚‰ã‚Œã¦ã„ã‚‹ã®ã§ã€Œã“ã‚Œã©ã†ä½¿ã†ã®ã‚„ã‚ã‹ï¼Ÿã€ã¿ãŸã„ãªæ¢ã—æ–¹ã‚‚å¯èƒ½ã§ã™ã€‚

ç§çš„ã«ã¯ã€Pythonista3 ä½œè€…ã® omz æ°ã®æ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ãŒã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã€ã“ã¡ã‚‰ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã¿ã‚‹ã®ãŒè‰¯ã„ã‹ã¨æ€ã„ã¾ã™ã€‚

[Pythonista/omz | tdamdouni/Pythonista](https://github.com/tdamdouni/Pythonista/tree/master/omz)

https://github.com/tdamdouni/Pythonista/tree/master/omz

ä½œè€…è‡ªèº«ãŒæ›¸ã„ã¦ã„ã‚‹ã®ã§ã€Pythonista3 ã‚’ã©ã†ã‚„ã£ã¦ä½¿ã£ã¦æ¬²ã—ã„ã‹ï¼Ÿã©ã†æ›¸ã‹ã‚Œã‚‹æƒ³å®šãªã®ã‹ï¼Ÿã‚‚ã€æ„Ÿã˜å–ã‚Œã‚‹ã®ã§ã¯ãªã„ã‹ãªã¨æ€ã„ã¾ã™ã€‚

### File Picker.py

[File Picker.py | tdamdouni/Pythonista](https://github.com/tdamdouni/Pythonista/blob/master/omz/File%20Picker.py) ã¨ã„ã†ã€ãã‚Œã£ã½ã„ã‚‚ã®ãŒã‚ã‚‹ã®ã§ã€ã“ã¡ã‚‰ã‚’å‚è€ƒã«å¿…è¦ã«å¿œã˜ã¦æ”¹å¤‰ã—ã¦ã„ãã¨ã“ã«ã—ã¾ã—ã‚‡ã†ã€‚

https://github.com/tdamdouni/Pythonista/blob/master/omz/File%20Picker.py

ä½œè€…ã® gist [File Picker.py](https://gist.github.com/omz/e3433ebba20c92b63111) ã«ã‚‚ã€åŒæ§˜ã®ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚

https://gist.github.com/omz/e3433ebba20c92b63111

[difffã€Šï¾ƒï¾ï½­ï¾Œï¾Œã€‹](https://difff.jp/) ã§å·®åˆ†ç¢ºèªã—ãŸã¨ã“ã‚ã€å…ˆé ­ã®è¨˜è¼‰æƒ…å ±ä»¥å¤–ã®å·®åˆ†ã¯è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸã®ã§ã€ã©ã¡ã‚‰ã‚’ä½¿ã£ã¦ã‚‚å•é¡Œãªã„ã§ã™ã€‚

![img221129_131343.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/d93f26c9-e6af-ab9f-9930-eccdc953ffbd.png)

#### æŒ™å‹•ã‚’ã¿ã¦ã¿ã‚‹

gist ã®[File Picker.py](https://gist.github.com/omz/e3433ebba20c92b63111) ã‚’ä½¿ã„ã¾ã—ãŸ

https://gist.github.com/omz/e3433ebba20c92b63111

![img221129_145104.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/d3b3f4fb-0adb-7762-faaa-5a5c2f6fc30b.gif)

å®Ÿè¡Œã—ã¦ã¿ã‚‹ã¨

- `Documents` ã®éšå±¤ã‹ã‚‰é–‹å§‹
- ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªéšå±¤ãŒé–‹ã‹ã‚Œã¦ã„ãæµã‚Œ
- `.py` ãƒ•ã‚¡ã‚¤ãƒ«ã—ã‹é¸ã¹ãªã„ï¼Ÿ
- ï¼ˆdotFiles ã¯è¡¨ç¤ºã•ã‚Œãªã„ï¼‰
- `[Done]` ã§ç¢ºå®šã—ãŸã‚‰ä½•ã‹é€šä¿¡ã—ã¦ã‚‹
- æ–°ã—ã„ View ãŒé–‹ã‹ã‚Œã‚‹

ã¨ã„ã£ãŸæµã‚Œã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚

ã¨ã‚Šã‚ãˆãš

- ä¸è¦ãã†ãªéƒ¨åˆ†ã®å‰Šé™¤
  - FTPï¼ˆï¼Ÿï¼‰é€šä¿¡
- è‡ªåˆ†ã®å®Ÿè£…ã—ãŸã„æ©Ÿèƒ½
  - root ã‹ã‚‰è¡¨ç¤º
  - é–‹ã‘ã‚‹ã‚‚ã®ã¯ã€Pythonista3 ã®ã‚¨ãƒ‡ã‚£ã‚¿ã§é–‹ã

ã‚’ã€ï¼ˆç„¡ç†ã‚„ã‚Šï¼‰é©ç”¨ã•ã›ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

#### ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

![img221129_202942.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2953777/55b22371-b7cb-94cc-e035-5a0b8deca29c.gif)

```py
# coding: utf-8
import ui
import os
from objc_util import ObjCInstance, ObjCClass
from operator import attrgetter
#import time
import threading
import functools
#import ftplib
import re


# http://stackoverflow.com/a/6547474
def human_size(size_bytes):
  '''Helper function for formatting human-readable file sizes'''
  if size_bytes == 1:
    return "1 byte"
  suffixes_table = [('bytes', 0), ('KB', 0), ('MB', 1), ('GB', 2), ('TB', 2),
                    ('PB', 2)]
  num = float(size_bytes)
  for suffix, precision in suffixes_table:
    if num < 1024.0:
      break
    num /= 1024.0
  if precision == 0:
    formatted_size = "%d" % num
  else:
    formatted_size = str(round(num, ndigits=precision))
  return "%s %s" % (formatted_size, suffix)


class TreeNode(object):
  def __init__(self):
    self.expanded = False
    self.children = None
    self.leaf = True
    self.title = ''
    self.subtitle = ''
    self.icon_name = None
    self.level = 0
    self.enabled = True

  def expand_children(self):
    self.expanded = True
    self.children = []

  def collapse_children(self):
    self.expanded = False

  def __repr__(self):
    return '<TreeNode: "%s"%s>' % (self.title, ' (expanded)'
                                   if self.expanded else '')


class FileTreeNode(TreeNode):
  def __init__(self, path, show_size=True, select_dirs=True,
               file_pattern=None):
    TreeNode.__init__(self)
    self.path = path
    self.title = os.path.split(path)[1]
    self.select_dirs = select_dirs
    self.file_pattern = file_pattern
    is_dir = os.path.isdir(path)
    self.leaf = not is_dir
    ext = os.path.splitext(path)[1].lower()
    if is_dir:
      self.icon_name = 'Folder'
    elif ext == '.py':
      self.icon_name = 'FilePY'
    elif ext == '.pyui':
      self.icon_name = 'FileUI'
    elif ext in ('.png', '.jpg', '.jpeg', '.gif'):
      self.icon_name = 'FileImage'
    else:
      self.icon_name = 'FileOther'
    self.show_size = show_size
    if not is_dir and show_size:
      self.subtitle = human_size((os.stat(self.path).st_size))
    if is_dir and not select_dirs:
      self.enabled = False
    elif not is_dir:
      filename = os.path.split(path)[1]
      self.enabled = not file_pattern or re.match(file_pattern, filename)

  @property
  def cmp_title(self):
    return self.title.lower()

  def expand_children(self):
    if self.children is not None:
      self.expanded = True
      return
    files = os.listdir(self.path)
    children = []
    for filename in files:
      if filename.startswith('.'):
        continue
      full_path = os.path.join(self.path, filename)
      node = FileTreeNode(full_path, self.show_size, self.select_dirs,
                          self.file_pattern)
      node.level = self.level + 1
      children.append(node)
    self.expanded = True
    self.children = sorted(children, key=attrgetter('leaf', 'cmp_title'))


'''
# Just a simple demo of a custom TreeNode class... The TreeDialogController should be initialized with async_mode=True when using this class.
class FTPTreeNode(TreeNode):
  def __init__(self, host, path=None, level=0):
    TreeNode.__init__(self)
    self.host = host
    self.path = path
    self.level = level
    if path:
      self.title = os.path.split(path)[1]
    else:
      self.title = self.host
    self.leaf = path and len(os.path.splitext(path)[1]) > 0
    self.icon_name = 'FileOther' if self.leaf else 'Folder'

  def expand_children(self):
    ftp = ftplib.FTP(self.host, timeout=10)
    ftp.login('anonymous')
    names = ftp.nlst(self.path or '')
    ftp.quit()
    self.children = [
      FTPTreeNode(self.host, name, self.level + 1) for name in names
    ]
    self.expanded = True
'''


class TreeDialogController(object):
  def __init__(self, root_node, allow_multi=False, async_mode=False):
    self.async_mode = async_mode
    self.allow_multi = allow_multi
    self.selected_entries = None
    self.table_view = ui.TableView()
    self.table_view.frame = (0, 0, 500, 500)
    self.table_view.data_source = self
    self.table_view.delegate = self
    self.table_view.flex = 'WH'
    self.table_view.allows_multiple_selection = True
    self.table_view.tint_color = 'gray'
    self.view = ui.View(frame=self.table_view.frame)
    self.view.add_subview(self.table_view)
    self.view.name = root_node.title
    self.busy_view = ui.View(
      frame=self.view.bounds, flex='WH', background_color=(0, 0, 0, 0.35))
    hud = ui.View(frame=(self.view.center.x - 50, self.view.center.y - 50, 100,
                         100))
    hud.background_color = (0, 0, 0, 0.7)
    hud.corner_radius = 8.0
    hud.flex = 'TLRB'
    spinner = ui.ActivityIndicator()
    spinner.style = ui.ACTIVITY_INDICATOR_STYLE_WHITE_LARGE
    spinner.center = (50, 50)
    spinner.start_animating()
    hud.add_subview(spinner)
    self.busy_view.add_subview(hud)
    self.busy_view.alpha = 0.0
    self.view.add_subview(self.busy_view)
    self.done_btn = ui.ButtonItem(title='Done', action=self.done_action)
    if self.allow_multi:
      self.view.right_button_items = [self.done_btn]
    self.done_btn.enabled = False
    self.root_node = root_node
    self.entries = []
    self.flat_entries = []
    if self.async_mode:
      self.set_busy(True)
      t = threading.Thread(target=self.expand_root)
      t.start()
    else:
      self.expand_root()

  def expand_root(self):
    self.root_node.expand_children()
    self.set_busy(False)
    self.entries = self.root_node.children
    self.flat_entries = self.entries
    self.table_view.reload()

  def flatten_entries(self, entries, dest=None):
    if dest is None:
      dest = []
    for entry in entries:
      dest.append(entry)
      if not entry.leaf and entry.expanded:
        self.flatten_entries(entry.children, dest)
    return dest

  def rebuild_flat_entries(self):
    self.flat_entries = self.flatten_entries(self.entries)

  def tableview_number_of_rows(self, tv, section):
    return len(self.flat_entries)

  def tableview_cell_for_row(self, tv, section, row):
    cell = ui.TableViewCell()
    entry = self.flat_entries[row]
    level = entry.level - 1
    image_view = ui.ImageView(frame=(44 + 20 * level, 5, 34, 34))
    label_x = 44 + 34 + 8 + 20 * level
    label_w = cell.content_view.bounds.w - label_x - 8
    if entry.subtitle:
      label_frame = (label_x, 0, label_w, 26)
      sub_label = ui.Label(frame=(label_x, 26, label_w, 14))
      sub_label.font = ('<System>', 12)
      sub_label.text = entry.subtitle
      sub_label.text_color = '#999'
      cell.content_view.add_subview(sub_label)
    else:
      label_frame = (label_x, 0, label_w, 44)
    label = ui.Label(frame=label_frame)
    if entry.subtitle:
      label.font = ('<System>', 15)
    else:
      label.font = ('<System>', 18)
    label.text = entry.title
    label.flex = 'W'
    cell.content_view.add_subview(label)
    if entry.leaf and not entry.enabled:
      label.text_color = '#999'
    cell.content_view.add_subview(image_view)
    if not entry.leaf:
      has_children = entry.expanded
      btn = ui.Button(image=ui.Image.named('CollapseFolder' if has_children
                                           else 'ExpandFolder'))
      btn.frame = (20 * level, 0, 44, 44)
      btn.action = self.expand_dir_action
      cell.content_view.add_subview(btn)
    if entry.icon_name:
      image_view.image = ui.Image.named(entry.icon_name)
    else:
      image_view.image = None
    cell.selectable = entry.enabled
    return cell

  def row_for_view(self, sender):
    '''Helper to find the row index for an 'expand' button'''
    cell = ObjCInstance(sender)
    while not cell.isKindOfClass_(ObjCClass('UITableViewCell')):
      cell = cell.superview()
    return ObjCInstance(self.table_view).indexPathForCell_(cell).row()

  def expand_dir_action(self, sender):
    '''Invoked by 'expand' button'''
    row = self.row_for_view(sender)
    entry = self.flat_entries[row]
    if entry.expanded:
      sender.image = ui.Image.named('ExpandFolder')
    else:
      sender.image = ui.Image.named('CollapseFolder')
    self.toggle_dir(row)
    self.update_done_btn()

  def toggle_dir(self, row):
    '''Expand or collapse a folder node'''
    entry = self.flat_entries[row]
    if entry.expanded:
      entry.collapse_children()
      old_len = len(self.flat_entries)
      self.rebuild_flat_entries()
      num_deleted = old_len - len(self.flat_entries)
      deleted_rows = range(row + 1, row + num_deleted + 1)
      self.table_view.delete_rows(deleted_rows)
    else:
      if self.async_mode:
        self.set_busy(True)
        expand = functools.partial(self.do_expand, entry, row)
        t = threading.Thread(target=expand)
        t.start()
      else:
        self.do_expand(entry, row)

  def do_expand(self, entry, row):
    '''Actual folder expansion (called on background thread if async_mode is enabled)'''
    entry.expand_children()
    self.set_busy(False)
    old_len = len(self.flat_entries)
    self.rebuild_flat_entries()
    num_inserted = len(self.flat_entries) - old_len
    inserted_rows = range(row + 1, row + num_inserted + 1)
    self.table_view.insert_rows(inserted_rows)

  def tableview_did_select(self, tv, section, row):
    self.update_done_btn()

  def tableview_did_deselect(self, tv, section, row):
    self.update_done_btn()

  def update_done_btn(self):
    '''Deactivate the done button when nothing is selected'''
    selected = [
      self.flat_entries[i[1]] for i in self.table_view.selected_rows
      if self.flat_entries[i[1]].enabled
    ]
    if selected and not self.allow_multi:
      self.done_action(None)
    else:
      self.done_btn.enabled = len(selected) > 0

  def set_busy(self, flag):
    '''Show/hide spinner overlay'''

    def anim():
      self.busy_view.alpha = 1.0 if flag else 0.0

    ui.animate(anim)

  def done_action(self, sender):
    self.selected_entries = [
      self.flat_entries[i[1]] for i in self.table_view.selected_rows
      if self.flat_entries[i[1]].enabled
    ]
    self.view.close()


def file_picker_dialog(title=None,
                       root_dir=None,
                       multiple=False,
                       select_dirs=False,
                       file_pattern=None,
                       show_size=True):
  if root_dir is None:
    root_dir = os.path.expanduser('~/Documents')
  if title is None:
    title = os.path.split(root_dir)[1]
  '''
  root_node = FileTreeNode(
    os.path.expanduser('~/Documents'), show_size, select_dirs, file_pattern)
  '''
  root_node = FileTreeNode(root_dir, show_size, select_dirs,
                           file_pattern)  # æŒ‡å®šã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§é–‹ã‘ã‚‹ã‚ˆã†ã«
  root_node.title = title or ''
  picker = TreeDialogController(root_node, allow_multi=multiple)
  #picker.view.present('sheet')
  picker.view.present(
    style='fullscreen', orientations=['portrait'])  # ç¸¦ä½ç½®ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã®å›ºå®š
  picker.view.wait_modal()
  if picker.selected_entries is None:
    return None
  paths = [e.path for e in picker.selected_entries]
  if multiple:
    return paths
  else:
    return paths[0]


'''
def ftp_dialog(host='mirrors.kernel.org'):
  # This is just a demo of how TreeDialogController is
  # extensible with custom TreeNode subclasses, so there
  # aren't as many options as for the regular file dialog.
  root_node = FTPTreeNode(host)
  picker = TreeDialogController(root_node, async_mode=True)
  picker.view.present('sheet')
  picker.view.wait_modal()
  if picker.selected_entries:
    return picker.selected_entries[0].path
'''


def main():
  root = os.path.expanduser('/')  # ã“ã“ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½ç½®ã‚’æ±ºã‚ã‚‹
  py_files = file_picker_dialog(
    #'Pick some .py files',
    title=None,
    root_dir=root,
    #multiple=True,
    multiple=False,  # ä¸€ã¤ã ã‘é¸æŠ
    select_dirs=False,
    #file_pattern=r'^.*\.py$')
    file_pattern=r'^.*\.*$')  # .py ä»¥å¤–ã‚‚å–ã‚Œã‚‹ã‚ˆã†ã«
  #print('Picked from ~/Documents:', py_files)
  if py_files:
    import editor
    editor.open_file(py_files, True)  # ã‚‚ã—é–‹ã‘ã‚‹ãªã‚‰é–‹ã
  '''
  ftp_file = ftp_dialog()
  print('Picked from FTP server:', ftp_file)
  '''


if __name__ == '__main__':
  main()
```

Reformat ã¯ã‹ã‘ã¦ã„ã¾ã™ãŒã€åŸºæœ¬çš„ã«å…ƒã®ã‚³ãƒ¼ãƒ‰ã‚’æ®‹ã—ã¤ã¤ã€å¤‰æ›´ç‚¹ã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦ãã®ç›´ä¸‹ã«æ›¸ãæ›ãˆã®ã‚³ãƒ¼ãƒ‰ã‚’å…¥ã‚Œã¦ã„ã¾ã™ã€‚

ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã‚¿ãƒƒãƒ—ã—ã¦ã‚‚ã€ã‚¨ãƒ©ãƒ¼ã¯å‡ºã¾ã™ãŒç¶™ç¶šã—ã¦ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç§»å‹•ã§ãã¾ã™ï¼ˆåŠ›æŠ€ï¼‰ã€‚

ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸéƒ¨åˆ†ã¯ã€è¡¨å±¤ã®éƒ¨åˆ†ã®ã¿ãªã®ã§å¤‰æ›´ç‚¹ã¯ã€ã‚³ãƒ¼ãƒ‰ã®ä¸‹ã®æ–¹ãŒãƒ¡ã‚¤ãƒ³ã«ãªã£ã¦ã„ã¾ã™ã­ã€‚

æœ€æ‚ªä½¿ç”¨è€…ã¯ã€è‡ªåˆ†ã®ã¿ãªã®ã§éåº¦ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’ã›ãšã«ã€ã‚´ãƒªã‚´ãƒªã¨ãƒˆãƒ©ã‚¤ã‚¢ãƒ³ãƒ‰ã‚¨ãƒ©ãƒ¼ã—ã¦ã‚‚ã„ã„ã§ã—ã‚‡ã†ã€‚

ï¼ˆè¨€ã„è¨³ã—ã¾ã™ã¨ã€ã“ã®è¨˜äº‹ã¨åŒæ™‚ä¸¦è¡Œã«ã‚«ã‚¹ã‚¿ãƒ ã—ã¦ã„ã£ãŸã®ã§ã€ã‚¬ãƒã‚¬ãƒã®ã‚¬ãƒã§ã™ ğŸ™‡ æ·±ãæ¤œè¨¼ã§ãã¦ã„ã¾ã›ã‚“ï¼‰

å…ƒã®ã‚³ãƒ¼ãƒ‰ã‚’å‰Šã£ãŸã‚Šæˆ»ã—ãŸã‚Šã—ãªãŒã‚‰ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®æŒ™å‹•ã‚’ç¢ºèªã—ã¦ã€è‡ªåˆ†ã®æ€ã„æãã‚¢ãƒ—ãƒªã«ã—ã¦ã„ãã®ã‚‚é¢ç™½ã„ã§ã™ã­ã€‚

## æ¬¡å›ã¯

OS ã®å†…éƒ¨ã®æ¢è¨ªã‚’ãŠã“ãªã„ã¾ã—ãŸã€‚ãã‚Œã«åˆã‚ã›ã¦ã€è‡ªåˆ†ã§ä½¿ã„ã‚„ã™ã„ãƒ„ãƒ¼ãƒ«ã‚’æ¢ã—ãŸã‚Šã€ä½œã£ãŸã‚Šæ”¹é€ ã—ãŸã‚Šã—ã¾ã—ãŸã€‚

æ¢è¨ªã®ãŠã¨ã‚‚ã«ãªã‚Šã¾ã—ãŸã‚‰ã€å¹¸ã„ã§ã™ã€‚

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é›†åˆçŸ¥ã‹ã‚‰ã€è‰²ã€…æ¢ã—ã¦ Pythonista3 åŠ›ã‚’ä¸Šã’ã¦ã„ãã®ã‚‚ã„ã„ã§ã™ã­ã€‚

[tdamdouni/Pythonista: Collection of Python Scripts written for Pythonista iOS App](https://github.com/tdamdouni/Pythonista)

https://github.com/tdamdouni/Pythonista

ä»Šå›ã¾ã§ã§ã€æ¢è¨ªã‚·ãƒªãƒ¼ã‚ºã¯çµ‚äº†ã§ã™ã€‚

æ¬¡å›ã‹ã‚‰ä½•ã‹ã¨ç›®ã‚’èƒŒã‘ã¦ããŸ`objc_util` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä¸­å¿ƒã«ç´¹ä»‹ã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚

ã“ã“ã¾ã§ã€èª­ã‚“ã§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚

ğŸ‘‡ : 13 æ—¥ç›®

https://qiita.com/pome-ta/items/fd66f3c1c7ee6a34282e

## ã›ã‚“ã§ã‚“

### Discord

Pythonista3 ã®æ—¥æœ¬èªã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚ã¿ãªã•ã‚“å„ªã—ãã¦ã€ã‚ã‹ã‚‰ãªã„ã¨ã“ã‚ã‚‚è¦ªèº«ã«æ•™ãˆã¦ãã‚Œã‚‹ã®ã§ã“ã®æ©Ÿä¼šã«è¦—ã„ã¦ã¿ã¦ãã ã•ã„ã€‚

https://t.co/0IOW2hn1VC

### æ›¸ç±

iPhone/iPad ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã™ã‚‹æœ€å¼·ã®æœ¬ã€‚

- [Python ã‚„ Jupyter ã§ iPhone/iPad å…ˆç«¯æ©Ÿèƒ½ã‚’ç°¡å˜ï½¥è‡ªç”±ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ï¼ã€Œæ´»ç”¨ç¯‡ã€ï¼šhirax](https://techbookfest.org/product/1WiyV4LEev3f4YrzesRKWV?productVariantID=axX32srsSgtLtZWUtjkj99)

https://techbookfest.org/product/1WiyV4LEev3f4YrzesRKWV?productVariantID=axX32srsSgtLtZWUtjkj99

- [Python ã‚„ Jupyter ã§ iPhone/iPad å…ˆç«¯æ©Ÿèƒ½ã‚’ç°¡å˜ï½¥è‡ªç”±ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ï¼ã€ŒåœŸå°ç¯‡ã€ï¼šhirax](https://techbookfest.org/product/wTZTyeibm5GQ5XgdfMrEBV?productVariantID=kRDmN1udbEYZUWbETdwL8r)

https://techbookfest.org/product/wTZTyeibm5GQ5XgdfMrEBV?productVariantID=kRDmN1udbEYZUWbETdwL8r

### ãã®ä»–

- ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

[Pythonista3 Advent Calendar 2022](https://qiita.com/advent-calendar/2022/pythonista3) ã§ã®ã‚³ãƒ¼ãƒ‰ã‚’ã¾ã¨ã‚ã¦ã„ã‚‹ãƒªãƒã‚¸ãƒˆãƒªãŒã‚ã‚Šã¾ã™ã€‚

ã‚³ãƒ¼ãƒ‰ã®ã‚¨ãƒ©ãƒ¼ã‚„å¤‰ãªã¨ã“ã‚ã‚„æ”¹å–„ç‚¹ãªã©ã€‚ã”æŒ‡æ‘˜ã‚„ PR ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™ãƒ¼

https://github.com/pome-ta/Pythonista3AdventCalendar2022sampleCode

- Twitter

ãªã‚“ã—ã‹ã‚¬ãƒãƒ£ã‚¬ãƒãƒ£ã—ã¦ã„ã¾ã™ãŒã€ãŠæ°—å…¼ã­ãªããŠå£°ãŒã‘ãã ã•ã„ã¾ã›ãƒ¼

https://twitter.com/pome_ta93

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">ã‚„ã‚Œã‚‹ã‹ã€ã‚„ã‚Œãªã„ã‹ã€‚ã§ã¯ãªãã€ã‚„ã‚‹ã‚“ã ã‘ã©ã‚‚ã€ç´¹ä»‹èª¬æ˜ã™ã‚‹ã“ã¨ã¯å°½ããªã„ã¨æ€ã†ã‘ã©ã€ç· ã‚åˆ‡ã‚Šå®ˆã‚Œã‚‹ã‹ï¼Ÿã£ã¦è©±ã‚ˆï¼ï¼ˆã‚¯ã‚ºï¼‰<br><br>Pythonista3 Advent Calendar 2022 <a href="https://t.co/JKUxA525Pt">https://t.co/JKUxA525Pt</a> <a href="https://twitter.com/hashtag/Qiita?src=hash&amp;ref_src=twsrc%5Etfw">#Qiita</a></p>&mdash; pome-ta (@pome_ta93) <a href="https://twitter.com/pome_ta93/status/1588570697777152006?ref_src=twsrc%5Etfw">November 4, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

- GitHub

åŸºæœ¬çš„ã« GitHub ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚ã’ã¦ã„ã‚‹ã®ã§ã€ä½•ã«ãƒãƒã£ã¦ä½•ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã®ã‹è¦³æ¸¬ã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚

https://github.com/pome-ta
